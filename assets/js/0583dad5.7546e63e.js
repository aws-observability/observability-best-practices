"use strict";(self.webpackChunkobservability_best_practices=self.webpackChunkobservability_best_practices||[]).push([[21],{30197:(e,a,s)=>{s.r(a),s.d(a,{assets:()=>c,contentTitle:()=>r,default:()=>h,frontMatter:()=>i,metadata:()=>o,toc:()=>d});var t=s(74848),n=s(28453);const i={},r="Real-time cost monitoring",o={id:"guides/cost/cost-visualization/AmazonManagedServiceforPrometheus",title:"Real-time cost monitoring",description:"Amazon Managed Service for Prometheus is a server-less, Prometheus-compatible monitoring service for container metrics that makes it easier to securely monitor container environments at scale. Amazon Managed Service for Prometheus pricing model is based on Metric samples ingested, Query samples processed, and Metrics stored. You can find the latest pricing details here.",source:"@site/docs/guides/cost/cost-visualization/AmazonManagedServiceforPrometheus.md",sourceDirName:"guides/cost/cost-visualization",slug:"/guides/cost/cost-visualization/AmazonManagedServiceforPrometheus",permalink:"/observability-best-practices/docs/guides/cost/cost-visualization/AmazonManagedServiceforPrometheus",draft:!1,unlisted:!1,editUrl:"https://github.com/aws-observability/observability-best-practices/docs/guides/cost/cost-visualization/AmazonManagedServiceforPrometheus.md",tags:[],version:"current",frontMatter:{},sidebar:"guides",previous:{title:"Amazon Managed Service for Prometheus",permalink:"/observability-best-practices/docs/guides/cost/cost-visualization/amazon-prometheus"},next:{title:"AWS X-Ray",permalink:"/observability-best-practices/docs/guides/cost/cost-visualization/aws-xray"}},c={},d=[{value:"Solution",id:"solution",level:3},{value:"Amazon Managed Grafana Dashboards",id:"amazon-managed-grafana-dashboards",level:3}];function l(e){const a={a:"a",br:"br",code:"code",h1:"h1",h3:"h3",img:"img",li:"li",ol:"ol",p:"p",strong:"strong",ul:"ul",...(0,n.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(a.h1,{id:"real-time-cost-monitoring",children:"Real-time cost monitoring"}),"\n",(0,t.jsxs)(a.p,{children:["Amazon Managed Service for Prometheus is a server-less, Prometheus-compatible monitoring service for container metrics that makes it easier to securely monitor container environments at scale. Amazon Managed Service for Prometheus pricing model is based on Metric samples ingested, Query samples processed, and Metrics stored. You can find the latest pricing details ",(0,t.jsx)(a.a,{href:"https://aws.amazon.com/prometheus/pricing/",children:"here"}),"."]}),"\n",(0,t.jsxs)(a.p,{children:["As a managed service, Amazon Managed Service for Prometheus automatically scales the ingestion, storage, and querying of operational metrics as workloads scale up and down. Some of our customers asked us guidance on how to track ",(0,t.jsx)(a.code,{children:"metric samples ingestion rate"})," and it's cost real-time. Let's explore how you can achieve that."]}),"\n",(0,t.jsx)(a.h3,{id:"solution",children:"Solution"}),"\n",(0,t.jsxs)(a.p,{children:["Amazon Managed Service for Prometheus ",(0,t.jsx)(a.a,{href:"https://aws.amazon.com/blogs/mt/introducing-vended-metrics-for-amazon-managed-service-for-prometheus/",children:"vends usage metrics"})," to Amazon CloudWatch. These metrics can be used to help you gain better visibility into your Amazon Managed Service for Prometheus workspace. The vended metrics can be found in the ",(0,t.jsx)(a.code,{children:"AWS/Usage"})," and ",(0,t.jsx)(a.code,{children:"AWS/Prometheus"})," namespaces in CloudWatch and these ",(0,t.jsx)(a.a,{href:"https://docs.aws.amazon.com/prometheus/latest/userguide/AMP-CW-usage-metrics.html",children:"metrics"})," are available in CloudWatch for no additional charge. You can always create a CloudWatch dashboard to further explore and visualize these metrics."]}),"\n",(0,t.jsx)(a.p,{children:"Today, you will be using Amazon CloudWatch as a data-source for Amazon Managed Grafana and build dashboards in Grafana to visualize those metrics. The architecture diagram illustrates the following."}),"\n",(0,t.jsxs)(a.ul,{children:["\n",(0,t.jsxs)(a.li,{children:["\n",(0,t.jsx)(a.p,{children:"Amazon Managed Service for Prometheus publishing vended metrics to Amazon CloudWatch"}),"\n"]}),"\n",(0,t.jsxs)(a.li,{children:["\n",(0,t.jsx)(a.p,{children:"Amazon CloudWatch as a data-source for Amazon Managed Grafana"}),"\n"]}),"\n",(0,t.jsxs)(a.li,{children:["\n",(0,t.jsx)(a.p,{children:"Users accessing the dashboards created in Amazon Managed Grafana"}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(a.p,{children:(0,t.jsx)(a.img,{alt:"prometheus-ingestion-rate",src:s(54327).A+"",width:"726",height:"311"})}),"\n",(0,t.jsx)(a.h3,{id:"amazon-managed-grafana-dashboards",children:"Amazon Managed Grafana Dashboards"}),"\n",(0,t.jsx)(a.p,{children:"The dashboard created in Amazon Managed Grafana will enable you to visualize;"}),"\n",(0,t.jsxs)(a.ol,{children:["\n",(0,t.jsxs)(a.li,{children:["\n",(0,t.jsxs)(a.p,{children:["Prometheus Ingestion Rate per workspace",(0,t.jsx)(a.br,{}),"\n",(0,t.jsx)(a.img,{alt:"prometheus-ingestion-rate-dash1",src:s(33248).A+"",width:"1702",height:"468"})]}),"\n"]}),"\n",(0,t.jsxs)(a.li,{children:["\n",(0,t.jsxs)(a.p,{children:["Prometheus Ingestion Rate and Real-time Cost per workspace",(0,t.jsx)(a.br,{}),"\n","For real-time cost tracking, you will be using a ",(0,t.jsx)(a.code,{children:"math expression"})," based on the pricing of ",(0,t.jsx)(a.code,{children:"Metrics Ingested Tier"})," for the ",(0,t.jsx)(a.code,{children:"First 2 billion samples"})," mentioned in the official ",(0,t.jsx)(a.a,{href:"https://aws.amazon.com/prometheus/pricing/",children:"AWS pricing document"}),". Math operations take numbers and time series as input and change them to different numbers and time series and refer this ",(0,t.jsx)(a.a,{href:"https://grafana.com/docs/grafana/latest/panels-visualizations/query-transform-data/expression-queries/#math",children:"document"})," for further customization to fit your business requirements.",(0,t.jsx)(a.br,{}),"\n",(0,t.jsx)(a.img,{alt:"prometheus-ingestion-rate-dash2",src:s(14459).A+"",width:"1899",height:"880"})]}),"\n"]}),"\n",(0,t.jsxs)(a.li,{children:["\n",(0,t.jsxs)(a.p,{children:["Prometheus Active Series per workspace",(0,t.jsx)(a.br,{}),"\n",(0,t.jsx)(a.img,{alt:"prometheus-ingestion-rate-dash3",src:s(92914).A+"",width:"1798",height:"472"})]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(a.p,{children:"A dashboard in Grafana is represented by a JSON object, which stores metadata of its dashboard. Dashboard metadata includes dashboard properties, metadata from panels, template variables, panel queries, etc."}),"\n",(0,t.jsxs)(a.p,{children:["You can access the ",(0,t.jsx)(a.strong,{children:"JSON template"})," of the above dashboard ",(0,t.jsxs)("mark",{children:[(0,t.jsx)(a.a,{target:"_blank","data-noBrokenLinkCheck":!0,href:s(88727).A+"",children:"here"}),"."]})]}),"\n",(0,t.jsxs)(a.p,{children:["With the preceding dashboard, you can now identify ingestion rate per workspace and monitor real-time cost per workspace based on the metrics ingestion rate for Amazon Managed Service for Prometheus. You can use other Grafana ",(0,t.jsx)(a.a,{href:"https://docs.aws.amazon.com/grafana/latest/userguide/Grafana-panels.html",children:"dashboard panels"})," to build visuals to suit your requirements."]})]})}function h(e={}){const{wrapper:a}={...(0,n.R)(),...e.components};return a?(0,t.jsx)(a,{...e,children:(0,t.jsx)(l,{...e})}):l(e)}},88727:(e,a,s)=>{s.d(a,{A:()=>t});const t=s.p+"assets/files/AmazonPrometheusMetrics-bc68c1db01e0421fb542832c0fdc9e8c.json"},54327:(e,a,s)=>{s.d(a,{A:()=>t});const t=s.p+"assets/images/ampmetricsingestionrate-042bdb64a3e8558bfa03ce6659aa6272.png"},33248:(e,a,s)=>{s.d(a,{A:()=>t});const t=s.p+"assets/images/ampwsingestionrate-1-1f5ab3244b335aec0ad974105fe7322f.png"},14459:(e,a,s)=>{s.d(a,{A:()=>t});const t=s.p+"assets/images/ampwsingestionrate-2-dd939bdcbb55c5b60570d7db1f632814.png"},92914:(e,a,s)=>{s.d(a,{A:()=>t});const t=s.p+"assets/images/ampwsingestionrate-3-49c3212aa1b0a564159af9c6fdf82b5c.png"},28453:(e,a,s)=>{s.d(a,{R:()=>r,x:()=>o});var t=s(96540);const n={},i=t.createContext(n);function r(e){const a=t.useContext(i);return t.useMemo((function(){return"function"==typeof e?e(a):{...a,...e}}),[a,e])}function o(e){let a;return a=e.disableParentContext?"function"==typeof e.components?e.components(n):e.components||n:r(e.components),t.createElement(i.Provider,{value:a},e.children)}}}]);