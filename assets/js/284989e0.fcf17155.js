"use strict";(globalThis.webpackChunkobservability_best_practices=globalThis.webpackChunkobservability_best_practices||[]).push([[4674],{25076:(e,t,i)=>{i.r(t),i.d(t,{assets:()=>c,contentTitle:()=>a,default:()=>p,frontMatter:()=>o,metadata:()=>n,toc:()=>l});const n=JSON.parse('{"id":"guides/dotnet/open-source/traces","title":"Tracing","description":".NET offers robust support for OpenTelemetry tracing, providing developers with powerful tools to monitor request flows across distributed systems. This implementation enables end-to-end visibility into application behavior and performance bottlenecks.","source":"@site/docs/guides/dotnet/open-source/traces.md","sourceDirName":"guides/dotnet/open-source","slug":"/guides/dotnet/open-source/traces","permalink":"/observability-best-practices/guides/dotnet/open-source/traces","draft":false,"unlisted":false,"editUrl":"https://github.com/aws-observability/observability-best-practices/blob/main/docusaurus/docs/guides/dotnet/open-source/traces.md","tags":[],"version":"current","frontMatter":{}}');var r=i(74848),s=i(28453);const o={},a="Tracing",c={},l=[{value:"Traces Implementation",id:"traces-implementation",level:2},{value:"Custom Traces",id:"custom-traces",level:2},{value:"Next Steps",id:"next-steps",level:2}];function d(e){const t={a:"a",code:"code",h1:"h1",h2:"h2",header:"header",li:"li",p:"p",pre:"pre",ul:"ul",...(0,s.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(t.header,{children:(0,r.jsx)(t.h1,{id:"tracing",children:"Tracing"})}),"\n",(0,r.jsx)(t.p,{children:".NET offers robust support for OpenTelemetry tracing, providing developers with powerful tools to monitor request flows across distributed systems. This implementation enables end-to-end visibility into application behavior and performance bottlenecks."}),"\n",(0,r.jsxs)(t.p,{children:["In the .NET ecosystem, OpenTelemetry tracing is built around the ",(0,r.jsx)(t.a,{href:"https://learn.microsoft.com/en-us/dotnet/api/system.diagnostics.activity?view=net-9.0",children:"System.Diagnostics.Activity"})," class, which is .NET's implementation of the W3C Trace Context specification. This alignment with industry standards ensures interoperability with other services and observability tools."]}),"\n",(0,r.jsx)(t.h2,{id:"traces-implementation",children:"Traces Implementation"}),"\n",(0,r.jsx)(t.p,{children:"Configuring OpenTelemetry tracing in a .NET application is straightforward:"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-c#",children:'builder.Services.AddOpenTelemetry()\n    .WithTracing(tracing => tracing\n        .AddAspNetCoreInstrumentation()\n        .AddHttpClientInstrumentation()\n        .AddEntityFrameworkCoreInstrumentation()\n        .AddSource("MyApplication.Tracing")\n        .AddOtlpExporter());\n'})}),"\n",(0,r.jsx)(t.p,{children:"A key strength of .NET's OpenTelemetry implementation is automatic instrumentation. Many common libraries and frameworks\u2014including ASP.NET Core, HttpClient, gRPC, and Entity Framework Core\u2014emit traces without requiring additional code. This provides immediate visibility into external calls and database operations."}),"\n",(0,r.jsx)(t.h2,{id:"custom-traces",children:"Custom Traces"}),"\n",(0,r.jsx)(t.p,{children:"Creating custom traces in application code uses the ActivitySource API:"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-c#",children:'// Create a source once and reuse it\nprivate static readonly ActivitySource MyActivitySource = \n    new("MyApplication.Tracing");\n\n// Create spans for important operations\nusing var activity = MyActivitySource.StartActivity("ProcessOrder");\nactivity?.SetTag("orderId", orderId);\n\n// Child operations create nested spans\nusing var childActivity = MyActivitySource.StartActivity("ValidatePayment");\n'})}),"\n",(0,r.jsx)(t.p,{children:"Registering your ActivitySource in dependency injection is considered a best practice for OpenTelemetry tracing in .NET applications."}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-c#",children:'// During service configuration\nservices.AddSingleton(sp => new ActivitySource("MyCompany.MyApplication", "1.0.0"));\n\n// Or create a wrapper service if you need more functionality\nservices.AddSingleton<TracingService>();\n\n// Then inject it where needed\npublic class OrderProcessor\n{\n    private readonly ActivitySource _activitySource;\n    \n    public OrderProcessor(ActivitySource activitySource)\n    {\n        _activitySource = activitySource;\n    }\n    \n    public void ProcessOrder(Order order)\n    {\n        using var activity = _activitySource.StartActivity("ProcessOrder");\n        activity?.SetTag("orderId", order.Id);\n        \n        // Processing logic\n    }\n}\n'})}),"\n",(0,r.jsx)(t.h2,{id:"next-steps",children:"Next Steps"}),"\n",(0,r.jsx)(t.p,{children:"Now that your application is instrumented, use a collector agent\u2014such as the OpenTelemetry Collector, CloudWatch Agent, or Fluent Bit\u2014to route traces to the observability backend of your choice. Refer to the links below for details and implementation guidance."}),"\n",(0,r.jsxs)(t.ul,{children:["\n",(0,r.jsxs)(t.li,{children:["\n",(0,r.jsxs)(t.p,{children:[(0,r.jsx)(t.a,{href:"https://aws-observability.github.io/observability-best-practices/patterns/otel",children:"Observability with OpenTelemetry"})," - Comprehensive guide to implementing OpenTelemetry across your applications, providing patterns for collecting, processing, and visualizing telemetry data with AWS services to achieve full-stack observability."]}),"\n"]}),"\n",(0,r.jsxs)(t.li,{children:["\n",(0,r.jsxs)(t.p,{children:[(0,r.jsx)(t.a,{href:"https://aws-observability.github.io/observability-best-practices/guides/operational/adot-at-scale/operating-adot-collector",children:"Operating the AWS Distro for OpenTelemetry (ADOT) Collector"})," - Practical guidance for deploying, scaling, and managing the ADOT Collector in production environments, including configuration best practices and integration with AWS observability services."]}),"\n"]}),"\n",(0,r.jsxs)(t.li,{children:["\n",(0,r.jsxs)(t.p,{children:[(0,r.jsx)(t.a,{href:"https://docs.aws.amazon.com/AmazonCloudWatch/latest/monitoring/Install-CloudWatch-Agent.html",children:"Collect metrics, logs, and traces with the CloudWatch agent"})," - Step-by-step instructions for installing and configuring the CloudWatch agent to collect telemetry data from your applications and infrastructure, with seamless integration into AWS CloudWatch."]}),"\n"]}),"\n",(0,r.jsxs)(t.li,{children:["\n",(0,r.jsxs)(t.p,{children:[(0,r.jsx)(t.a,{href:"https://github.com/aws/aws-for-fluent-bit?tab=readme-ov-file",children:"AWS for Fluent Bit"})," - Lightweight and efficient solution for collecting and forwarding logs, metrics, and traces to multiple AWS services, optimized for containerized environments and Kubernetes deployments."]}),"\n"]}),"\n",(0,r.jsxs)(t.li,{children:["\n",(0,r.jsxs)(t.p,{children:[(0,r.jsx)(t.a,{href:"https://docs.aws.amazon.com/xray/latest/devguide/xray-services-adot.html",children:"AWS XRay"})," - Detailed documentation on integrating AWS X-Ray with OpenTelemetry for distributed tracing, allowing you to analyze and debug production applications at scale with trace visualization and analysis tools."]}),"\n"]}),"\n"]})]})}function p(e={}){const{wrapper:t}={...(0,s.R)(),...e.components};return t?(0,r.jsx)(t,{...e,children:(0,r.jsx)(d,{...e})}):d(e)}},28453:(e,t,i)=>{i.d(t,{R:()=>o,x:()=>a});var n=i(96540);const r={},s=n.createContext(r);function o(e){const t=n.useContext(s);return n.useMemo(function(){return"function"==typeof e?e(t):{...t,...e}},[t,e])}function a(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:o(e.components),n.createElement(s.Provider,{value:t},e.children)}}}]);