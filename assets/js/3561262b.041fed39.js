"use strict";(self.webpackChunkobservability_best_practices=self.webpackChunkobservability_best_practices||[]).push([[5052],{13088:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>a,contentTitle:()=>o,default:()=>u,frontMatter:()=>r,metadata:()=>s,toc:()=>c});const s=JSON.parse('{"id":"tools/logs/contributor_insights/contributor_insights","title":"CloudWatch Contributor Insights","description":"Overview","source":"@site/docs/tools/logs/contributor_insights/contributor_insights.md","sourceDirName":"tools/logs/contributor_insights","slug":"/tools/logs/contributor_insights/","permalink":"/observability-best-practices/tools/logs/contributor_insights/","draft":false,"unlisted":false,"editUrl":"https://github.com/aws-observability/observability-best-practices/blob/main/docusaurus/docs/tools/logs/contributor_insights/contributor_insights.md","tags":[],"version":"current","frontMatter":{},"sidebar":"tools","previous":{"title":"CloudWatch Logs Insights Example Queries","permalink":"/observability-best-practices/tools/logs/logs-insights-examples"},"next":{"title":"CloudWatch Logs Data Protection Policies for SLG/EDU","permalink":"/observability-best-practices/tools/logs/dataprotection/data-protection-policies"}}');var t=i(74848),l=i(28453);const r={},o="CloudWatch Contributor Insights",a={},c=[{value:"Overview",id:"overview",level:2},{value:"Features",id:"features",level:2},{value:"Implementation",id:"implementation",level:2},{value:"Built-in Rules",id:"built-in-rules",level:3},{value:"Custom Rules",id:"custom-rules",level:3},{value:"Best Practices",id:"best-practices",level:2},{value:"Rule Configuration",id:"rule-configuration",level:3},{value:"Performance Optimization",id:"performance-optimization",level:3},{value:"Cost Management",id:"cost-management",level:3},{value:"Security",id:"security",level:3},{value:"Common Issues and Solutions",id:"common-issues-and-solutions",level:2},{value:"Rule Not Matching Logs",id:"rule-not-matching-logs",level:3},{value:"Missing Data",id:"missing-data",level:3},{value:"Performance Issues",id:"performance-issues",level:3},{value:"Integration",id:"integration",level:2},{value:"CloudWatch Dashboards",id:"cloudwatch-dashboards",level:3},{value:"CloudWatch Alarms",id:"cloudwatch-alarms",level:3},{value:"Tools and Resources",id:"tools-and-resources",level:2},{value:"AWS CLI Commands",id:"aws-cli-commands",level:3},{value:"Related Services",id:"related-services",level:3},{value:"Additional Resources",id:"additional-resources",level:3}];function d(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",img:"img",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,l.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.header,{children:(0,t.jsx)(n.h1,{id:"cloudwatch-contributor-insights",children:"CloudWatch Contributor Insights"})}),"\n",(0,t.jsx)(n.h2,{id:"overview",children:"Overview"}),"\n",(0,t.jsx)(n.p,{children:"Amazon CloudWatch Contributor Insights helps you analyze log data to identify top contributors influencing your metrics. It enables you to understand which entities are impacting your system's behavior and performance by creating real-time rankings and statistics."}),"\n",(0,t.jsx)(n.h2,{id:"features",children:"Features"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Real-time analysis of log data"}),"\n",(0,t.jsx)(n.li,{children:"Built-in rules for common AWS services"}),"\n",(0,t.jsx)(n.li,{children:"Custom rule creation capabilities"}),"\n",(0,t.jsx)(n.li,{children:"Automatic data processing and ranking"}),"\n",(0,t.jsx)(n.li,{children:"Integration with CloudWatch dashboards and alarms"}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"implementation",children:"Implementation"}),"\n",(0,t.jsx)(n.h3,{id:"built-in-rules",children:"Built-in Rules"}),"\n",(0,t.jsx)(n.p,{children:"CloudWatch Contributor Insights provides pre-built rules for common AWS services:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"VPC Flow Logs analysis"}),"\n",(0,t.jsx)(n.li,{children:"Application Load Balancer logs"}),"\n",(0,t.jsx)(n.li,{children:"Amazon API Gateway logs"}),"\n",(0,t.jsx)(n.li,{children:"AWS Lambda logs"}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"custom-rules",children:"Custom Rules"}),"\n",(0,t.jsx)(n.p,{children:"Create custom rules by defining:"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsx)(n.li,{children:"Log group your source documents. Contributor fields to analyze"}),"\n",(0,t.jsx)(n.li,{children:"Metrics and aggregations"}),"\n",(0,t.jsx)(n.li,{children:"Time windows and sampling rates"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:"Example custom rule:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-yaml",children:'{\n\t"AggregateOn": "Count",\n\t"Contribution": {\n\t\t"Filters": [],\n\t\t"Keys": [\n\t\t\t"$.pettype"\n\t\t]\n\t},c\n\t"LogFormat": "JSON",\n\t"Schema": {\n\t\t"Name": "CloudWatchLogRule",\n\t\t"Version": 1\n\t},\n\t"LogGroupARNs": [\n\t\t"arn:aws:logs:[region]:[account]:log-group:[API Gateway Log Group Name]"\n\t]\n}\n'})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{alt:"Preview of the CloudWatch Contributor Insights console",src:i(40438).A+"",width:"1678",height:"624"})}),"\n",(0,t.jsx)(n.h2,{id:"best-practices",children:"Best Practices"}),"\n",(0,t.jsx)(n.h3,{id:"rule-configuration",children:"Rule Configuration"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Use descriptive rule names"}),"\n",(0,t.jsx)(n.li,{children:"Start with built-in rules when possible"}),"\n",(0,t.jsx)(n.li,{children:"Implement targeted log filtering"}),"\n",(0,t.jsx)(n.li,{children:"Configure appropriate time windows"}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"performance-optimization",children:"Performance Optimization"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Limit active rules count"}),"\n",(0,t.jsx)(n.li,{children:"Set optimal sampling rates"}),"\n",(0,t.jsx)(n.li,{children:"Use appropriate aggregation periods"}),"\n",(0,t.jsx)(n.li,{children:"Enable rules only for needed log groups"}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"cost-management",children:"Cost Management"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Monitor rule usage regularly"}),"\n",(0,t.jsx)(n.li,{children:"Delete unused rules"}),"\n",(0,t.jsx)(n.li,{children:"Implement log filtering"}),"\n",(0,t.jsx)(n.li,{children:"Review sampling rates periodically"}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"security",children:"Security"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Follow least privilege principle"}),"\n",(0,t.jsx)(n.li,{children:"Encrypt sensitive data"}),"\n",(0,t.jsx)(n.li,{children:"Regular rule audits"}),"\n",(0,t.jsx)(n.li,{children:"Monitor pattern changes"}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"common-issues-and-solutions",children:"Common Issues and Solutions"}),"\n",(0,t.jsx)(n.h3,{id:"rule-not-matching-logs",children:"Rule Not Matching Logs"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Issue"}),": Rules not processing expected logs\n",(0,t.jsx)(n.strong,{children:"Solution"}),":"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Verify log format matches rule configuration"}),"\n",(0,t.jsx)(n.li,{children:"Check field names are correct"}),"\n",(0,t.jsx)(n.li,{children:"Validate JSON structure"}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"missing-data",children:"Missing Data"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Issue"}),": Gaps in contributor data\n",(0,t.jsx)(n.strong,{children:"Solution"}),":"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Check sampling rate configuration"}),"\n",(0,t.jsx)(n.li,{children:"Verify log delivery"}),"\n",(0,t.jsx)(n.li,{children:"Review time window settings"}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"performance-issues",children:"Performance Issues"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Issue"}),": Slow rule processing\n",(0,t.jsx)(n.strong,{children:"Solution"}),":"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Optimize number of active rules"}),"\n",(0,t.jsx)(n.li,{children:"Adjust sampling rates"}),"\n",(0,t.jsx)(n.li,{children:"Review contribution thresholds"}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"integration",children:"Integration"}),"\n",(0,t.jsx)(n.h3,{id:"cloudwatch-dashboards",children:"CloudWatch Dashboards"}),"\n",(0,t.jsx)(n.p,{children:"Create visualizations of top contributors:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-yaml",children:'{\n  "widgets": [\n    {\n      "type": "metric",\n      "properties": {\n        "view": "bar",\n        "region": "us-east-1",\n        "title": "Top Contributors",\n        "period": 300\n      }\n    }\n  ]\n}\n'})}),"\n",(0,t.jsx)(n.h3,{id:"cloudwatch-alarms",children:"CloudWatch Alarms"}),"\n",(0,t.jsx)(n.p,{children:"Set up alerts for contributor patterns:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-yaml",children:'{\n  "AlarmName": "HighContributorCount",\n  "MetricName": "UniqueContributors",\n  "Threshold": 100,\n  "Period": 300,\n  "EvaluationPeriods": 2\n}\n'})}),"\n",(0,t.jsx)(n.h2,{id:"tools-and-resources",children:"Tools and Resources"}),"\n",(0,t.jsx)(n.h3,{id:"aws-cli-commands",children:"AWS CLI Commands"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"# Create a rule\naws cloudwatch put-insight-rule --rule-name MyRule --rule-definition file://rule.json\n\n# Delete a rule\naws cloudwatch delete-insight-rule --rule-name MyRule\n"})}),"\n",(0,t.jsx)(n.h3,{id:"related-services",children:"Related Services"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Amazon CloudWatch"}),"\n",(0,t.jsx)(n.li,{children:"CloudWatch Logs"}),"\n",(0,t.jsx)(n.li,{children:"CloudWatch Alarms"}),"\n",(0,t.jsx)(n.li,{children:"Amazon EventBridge"}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"additional-resources",children:"Additional Resources"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"https://docs.aws.amazon.com/AmazonCloudWatch/latest/monitoring/ContributorInsights.html",children:"Official Documentation"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"https://docs.aws.amazon.com/AmazonCloudWatch/latest/monitoring/ContributorInsights-RuleSyntax.html",children:"Rule Syntax Reference"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"https://docs.aws.amazon.com/cli/latest/reference/cloudwatch/put-insight-rule.html",children:"AWS CLI Reference"})}),"\n"]})]})}function u(e={}){const{wrapper:n}={...(0,l.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(d,{...e})}):d(e)}},28453:(e,n,i)=>{i.d(n,{R:()=>r,x:()=>o});var s=i(96540);const t={},l=s.createContext(t);function r(e){const n=s.useContext(l);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:r(e.components),s.createElement(l.Provider,{value:n},e.children)}},40438:(e,n,i)=>{i.d(n,{A:()=>s});const s=i.p+"assets/images/contrib1-ade594b7be2dc20328c966f41cb5ebdd.png"}}]);