"use strict";(self.webpackChunkobservability_best_practices=self.webpackChunkobservability_best_practices||[]).push([[6464],{11764:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>c,contentTitle:()=>o,default:()=>d,frontMatter:()=>i,metadata:()=>r,toc:()=>u});var n=a(74848),s=a(28453);const i={},o="AWS X-Ray",r={id:"guides/cost/cost-visualization/aws-xray",title:"AWS X-Ray",description:"AWS X-Ray cost and usage visuals will allow you to gain insights into cost of individual AWS Accounts, AWS Regions, and TracesStored!",source:"@site/docs/guides/cost/cost-visualization/aws-xray.md",sourceDirName:"guides/cost/cost-visualization",slug:"/guides/cost/cost-visualization/aws-xray",permalink:"/docs/guides/cost/cost-visualization/aws-xray",draft:!1,unlisted:!1,editUrl:"https://github.com/aws-observability/observability-best-practices/docs/guides/cost/cost-visualization/aws-xray.md",tags:[],version:"current",frontMatter:{},sidebar:"guides",previous:{title:"Real-time cost monitoring",permalink:"/docs/guides/cost/cost-visualization/AmazonManagedServiceforPrometheus"},next:{title:"Monitor Amazon RDS and Aurora databases",permalink:"/docs/guides/databases/rds-and-aurora"}},c={},u=[];function l(e){const t={a:"a",h1:"h1",li:"li",ol:"ol",p:"p",...(0,s.R)(),...e.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(t.h1,{id:"aws-x-ray",children:"AWS X-Ray"}),"\n",(0,n.jsx)(t.p,{children:"AWS X-Ray cost and usage visuals will allow you to gain insights into cost of individual AWS Accounts, AWS Regions, and TracesStored!"}),"\n",(0,n.jsx)(t.p,{children:"To visualize and analyze the cost and usage data, you need to create a custom Athena view."}),"\n",(0,n.jsxs)(t.ol,{children:["\n",(0,n.jsxs)(t.li,{children:["\n",(0,n.jsxs)(t.p,{children:["Before proceeding, make sure that you\u2019ve created the CUR (step #1) and deployed the AWS Conformation Template (step #2) mentioned in the ",(0,n.jsx)(t.a,{href:"/docs/guides/cost/cost-visualization/cost#implementation",children:"Implementation overview"}),"."]}),"\n"]}),"\n",(0,n.jsxs)(t.li,{children:["\n",(0,n.jsxs)(t.p,{children:["Now, Create a new Amazon Athena ",(0,n.jsx)(t.a,{href:"https://athena-in-action.workshop.aws/30-basics/303-create-view.html",children:"view"})," by using the following query. This query fetches cost and usage of Amazon Managed Grafana across all the AWS Accounts in your Organization."]}),"\n",(0,n.jsx)(t.p,{children:'CREATE OR REPLACE VIEW "xray_cost" AS\nSELECT\nline_item_usage_type\n, line_item_resource_id\n, line_item_usage_account_id\n, month\n, year\n, "sum"(line_item_usage_amount) "Usage"\n, "sum"(line_item_net_unblended_cost) cost\nFROM\ndatabase.tablename #replace database.tablename with your database and table name\nWHERE ("line_item_product_code" = \'AWSXRay\')\nGROUP BY 1, 2, 3, 4, 5'}),"\n"]}),"\n"]}),"\n",(0,n.jsxs)(t.p,{children:["Using Athena as a data source, you can build dashboards in either Amazon Managed Grafana or Amazon QuickSight to suit your business requirements. As well, you could directly run ",(0,n.jsx)(t.a,{href:"https://docs.aws.amazon.com/athena/latest/ug/querying-athena-tables.html",children:"SQL queries"})," against the Athena view that you created."]})]})}function d(e={}){const{wrapper:t}={...(0,s.R)(),...e.components};return t?(0,n.jsx)(t,{...e,children:(0,n.jsx)(l,{...e})}):l(e)}},28453:(e,t,a)=>{a.d(t,{R:()=>o,x:()=>r});var n=a(96540);const s={},i=n.createContext(s);function o(e){const t=n.useContext(i);return n.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function r(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:o(e.components),n.createElement(i.Provider,{value:t},e.children)}}}]);