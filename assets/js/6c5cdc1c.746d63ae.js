"use strict";(self.webpackChunkobservability_best_practices=self.webpackChunkobservability_best_practices||[]).push([[8977],{75229:(e,t,s)=>{s.r(t),s.d(t,{assets:()=>c,contentTitle:()=>o,default:()=>h,frontMatter:()=>n,metadata:()=>r,toc:()=>d});var a=s(74848),i=s(28453);const n={},o="Percentiles are important",r={id:"guides/operational/business/sla-percentile",title:"Percentiles are important",description:"Percentiles are important in monitoring and reporting because they provide a more detailed and accurate view of data distribution compared to just relying on averages. An average can sometimes hide important information, such as outliers or variations in the data, that can significantly impact performance and user experience. Percentiles, on the other hand, can reveal these hidden details and give a better understanding of how the data is distributed.",source:"@site/docs/guides/operational/business/sla-percentile.md",sourceDirName:"guides/operational/business",slug:"/guides/operational/business/sla-percentile",permalink:"/observability-best-practices/docs/guides/operational/business/sla-percentile",draft:!1,unlisted:!1,editUrl:"https://github.com/aws-observability/observability-best-practices/docs/guides/operational/business/sla-percentile.md",tags:[],version:"current",frontMatter:{},sidebar:"guides",previous:{title:"Why should you do observability?",permalink:"/observability-best-practices/docs/guides/operational/business/monitoring-for-business-outcomes"},next:{title:"key-performance-indicators",permalink:"/observability-best-practices/docs/guides/operational/business/key-performance-indicators"}},c={},d=[];function l(e){const t={a:"a",code:"code",h1:"h1",img:"img",p:"p",pre:"pre",strong:"strong",...(0,i.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(t.h1,{id:"percentiles-are-important",children:"Percentiles are important"}),"\n",(0,a.jsx)(t.p,{children:"Percentiles are important in monitoring and reporting because they provide a more detailed and accurate view of data distribution compared to just relying on averages. An average can sometimes hide important information, such as outliers or variations in the data, that can significantly impact performance and user experience. Percentiles, on the other hand, can reveal these hidden details and give a better understanding of how the data is distributed."}),"\n",(0,a.jsxs)(t.p,{children:["In ",(0,a.jsx)(t.a,{href:"https://aws.amazon.com/cloudwatch/",children:"Amazon CloudWatch"}),", percentiles can be used to monitor and report on various metrics, such as response times, latency, and error rates, across your applications and infrastructure. By setting up alarms on percentiles, you can get alerted when specific percentile values exceed thresholds, allowing you to take action before they impact more customers."]}),"\n",(0,a.jsxs)(t.p,{children:["To use ",(0,a.jsx)(t.a,{href:"https://docs.aws.amazon.com/AmazonCloudWatch/latest/monitoring/cloudwatch_concepts.html#Percentiles",children:"percentiles in CloudWatch"}),", choose your metric in ",(0,a.jsx)(t.strong,{children:"All metrics"})," in the CloudWatch console and use an existing metric and set the ",(0,a.jsx)(t.strong,{children:"statistic"})," to ",(0,a.jsx)(t.strong,{children:"p99"}),", you can then edit the value after the p to whichever percentile you would like. You can then view percentile graphs, add them to ",(0,a.jsx)(t.a,{href:"https://docs.aws.amazon.com/AmazonCloudWatch/latest/monitoring/CloudWatch_Dashboards.html",children:"CloudWatch dashboards"})," and set alarms on these metrics. For example, you could set an alarm to notify you when the 95th percentile of response times exceeds a certain threshold, indicating that a significant percentage of users are experiencing slow response times."]}),"\n",(0,a.jsxs)(t.p,{children:["The histogram below was created in ",(0,a.jsx)(t.a,{href:"https://aws.amazon.com/grafana/",children:"Amazon Managed Grafana"})," using a ",(0,a.jsx)(t.a,{href:"https://docs.aws.amazon.com/AmazonCloudWatch/latest/logs/AnalyzingLogData.html",children:"CloudWath Logs Insights"})," query from ",(0,a.jsx)(t.a,{href:"https://docs.aws.amazon.com/AmazonCloudWatch/latest/monitoring/CloudWatch-RUM.html",children:"CloudWatch RUM"})," logs. The query used was:"]}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{children:'fields @timestamp, event_details.duration\n| filter event_type = "com.amazon.rum.performance_navigation_event"\n| sort @timestamp desc\n'})}),"\n",(0,a.jsx)(t.p,{children:"The histogram plots the page load time in milliseconds. With this view, it's possible to clearly see the outliers. This data is hidden if average is used."}),"\n",(0,a.jsx)(t.p,{children:(0,a.jsx)(t.img,{alt:"Histogram",src:s(16045).A+"",width:"761",height:"400"})}),"\n",(0,a.jsx)(t.p,{children:"The same data shown in CloudWatch using the average value indicates that pages are taking under two seconds to load. You can see from the histogram above, that most pages are actually taking less than a second and we have outliers."}),"\n",(0,a.jsx)(t.p,{children:(0,a.jsx)(t.img,{alt:"Histogram",src:s(84942).A+"",width:"761",height:"322"})}),"\n",(0,a.jsx)(t.p,{children:"Using the same data again with a percentile (p99) indicates that there is an issue, the CloudWatch graph now shows that 99 percent of page loads are taking less than 23 seconds."}),"\n",(0,a.jsx)(t.p,{children:(0,a.jsx)(t.img,{alt:"Histogram",src:s(73953).A+"",width:"761",height:"322"})}),"\n",(0,a.jsxs)(t.p,{children:["To make this easier to visualize, the graphs below compare the average value to the 99th percentile. In this case, the target page load time is two seconds, it is possible to use alternative ",(0,a.jsx)(t.a,{href:"https://docs.aws.amazon.com/AmazonCloudWatch/latest/monitoring/Statistics-definitions.html#Percentile-versus-Trimmed-Mean",children:"CloudWatch statistics"})," and ",(0,a.jsx)(t.a,{href:"https://docs.aws.amazon.com/AmazonCloudWatch/latest/monitoring/using-metric-math.html",children:"metric math"})," to make other calculations. In this case Percentile rank (PR) is used with the statistic ",(0,a.jsx)(t.strong,{children:"PR(:2000)"})," to show that 92.7% of page loads are happening within the target of 2000ms."]}),"\n",(0,a.jsx)(t.p,{children:(0,a.jsx)(t.img,{alt:"Histogram",src:s(94168).A+"",width:"761",height:"236"})}),"\n",(0,a.jsx)(t.p,{children:"Using percentiles in CloudWatch can help you gain deeper insights into your system's performance, detect issues early, and improve your customer's experience by identifying outliers that would otherwise be hidden."})]})}function h(e={}){const{wrapper:t}={...(0,i.R)(),...e.components};return t?(0,a.jsx)(t,{...e,children:(0,a.jsx)(l,{...e})}):l(e)}},84942:(e,t,s)=>{s.d(t,{A:()=>a});const a=s.p+"assets/images/percentiles-average-35e9153f2b508d0f56903f0c7e1436f0.png"},94168:(e,t,s)=>{s.d(t,{A:()=>a});const a=s.p+"assets/images/percentiles-comparison-3c0ed0f80c0f70c5f216e4139530beea.png"},16045:(e,t,s)=>{s.d(t,{A:()=>a});const a=s.p+"assets/images/percentiles-histogram-ef13e939d20bbff62140a1b4e44428bf.png"},73953:(e,t,s)=>{s.d(t,{A:()=>a});const a=s.p+"assets/images/percentiles-p99-83c797016bdcb4b1fa183333e8b58b2c.png"},28453:(e,t,s)=>{s.d(t,{R:()=>o,x:()=>r});var a=s(96540);const i={},n=a.createContext(i);function o(e){const t=a.useContext(n);return a.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function r(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:o(e.components),a.createElement(n.Provider,{value:t},e.children)}}}]);