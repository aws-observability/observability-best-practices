# なぜオブザーバビリティを実践すべきか？

YouTube で[オブザーバビリティ戦略の策定](https://www.youtube.com/watch?v=Ub3ATriFapQ)をご覧ください

## 本当に重要なことは何ですか？

職場で行うすべてのことは、組織のミッションに沿ったものでなければなりません。雇用されている私たち全員が、組織のミッションを果たし、そのビジョンに向かって働いています。Amazon では、私たちのミッションは次のように述べています。

> Amazon は、地球上で最もお客様を大切にする企業、地球上で最高の雇用主、そして地球上で最も安全な職場となることを目指しています。

— [Amazon について](https://www.aboutamazon.com/about-us)

IT において、すべてのプロジェクト、デプロイ、セキュリティ対策、または最適化は、ビジネス成果に向けて機能する必要があります。明白に思えるかもしれませんが、ビジネスに価値を追加しないことは何もすべきではありません。ITIL が述べているように、

> すべての変更はビジネス価値を提供する必要があります。

— ITIL Service Transition、AXELOS、2011年、44ページ。  
— [Change Management in the Cloud AWS ホワイトペーパー](https://docs.aws.amazon.com/whitepapers/latest/change-management-in-the-cloud/change-management-in-the-cloud.html)を参照してください。

ミッションとビジネス価値は、実行するすべてのことに情報を提供する必要があるため重要です。オブザーバビリティには多くのメリットがあり、次のようなものが含まれます。

- 可用性の向上
- 信頼性の向上
- アプリケーションの健全性とパフォーマンスの把握
- コラボレーションの改善
- 問題のプロアクティブな検出
- 顧客満足度の向上
- 市場投入までの時間の短縮
- 運用コストの削減
- 自動化

これらのメリットはすべて、顧客に直接的に、または組織に間接的に、ビジネス価値を提供するという共通点があります。オブザーバビリティについて考えるとき、すべてはアプリケーションがビジネス価値を提供しているかどうかを考えることに立ち返る必要があります。

これは、オブザーバビリティがビジネス価値の提供に貢献する事柄を測定し、ビジネス成果とそれらがリスクにさらされている時に焦点を当てるべきであることを意味します。顧客が何を望み、何を必要としているかを考える必要があります。

## どこから始めればよいですか？

何が重要かを理解したので、次に何を測定する必要があるかを考える必要があります。Amazon では、お客様を起点として、お客様のニーズから逆算して考えます。

> 私たちは、サービスを改善し、メリットや機能を追加することに内発的に駆り立てられています。それが必要になる前に行います。必要になる前に価格を下げ、お客様への価値を高めます。必要になる前に発明します。

— Jeff Bezos、[2012 年株主への手紙](https://s2.q4cdn.com/299287126/files/doc_financials/annual/2012-Shareholder-Letter.pdf)

シンプルな例として、e コマースサイトを使用してみましょう。まず、オンラインで商品を購入する際に顧客として何を求めるかを考えてみてください。すべての人にとって同じではないかもしれませんが、おそらく次のようなことを気にするでしょう。

- 配送
- 価格
- セキュリティ
- ページ速度
- 検索 (探している製品を見つけられるか?)

顧客が何を重視しているかを把握したら、それらを測定し、ビジネス成果にどのように影響するかを測定し始めることができます。ページ速度はコンバージョン率と検索エンジンのランキングに直接影響します。2017年の調査では、モバイルユーザーの半数以上（53%）が、ページの読み込みに3秒以上かかる場合にページを放棄することが示されました。もちろん、ページ速度の重要性を示す多くの調査がありますが、これは測定すべき明白なメトリクスです。しかし、コンバージョンに測定可能な影響を与えるため、測定して対策を講じる必要があり、そのデータを使用して改善を行うことができます。

## 逆算して考える

顧客が何を重視しているかをすべて把握することは期待できません。これを読んでいるあなたは、おそらく技術的な役割を担っているでしょう。組織内のステークホルダーと話し合う必要があります。これは必ずしも簡単ではありませんが、重要なことを測定していることを確実にするために不可欠です。

e コマースの例を続けましょう。今回は検索について考えます。顧客が商品を購入するために検索できる必要があることは明らかかもしれませんが、[Forrester Research のレポート](https://www.forrester.com/report/MustHave+eCommerce+Features/-/E-RES89561)によると、訪問者の 43% がすぐに検索ボックスに移動し、検索者は非検索者と比較してコンバージョンに至る可能性が 2～3 倍高いことをご存知でしょうか。検索は本当に重要であり、適切に機能する必要があり、監視する必要があります。特定の検索で結果が得られないことを発見し、単純なパターンマッチングから自然言語処理に移行する必要があるかもしれません。これは、ビジネス成果を監視し、顧客体験を向上させるために行動する例です。

Amazon では。

> 私たちは、お客様を深く理解し、お客様の課題から逆算して、お客様の生活に有意義なソリューションを生み出すイノベーションを迅速に開発することに努めています。

— Daniel Slater - Worldwide Lead, Culture of Innovation, AWS、[Elements of Amazon's Day 1 Culture](https://aws.amazon.com/executive-insights/content/how-amazon-defines-and-operationalizes-a-day-1-culture/) より

私たちは顧客から始めて、顧客のニーズから逆算して取り組みます。これはビジネスで成功するための唯一のアプローチではありませんが、オブザーバビリティにとっては優れたアプローチです。ステークホルダーと協力して顧客にとって何が重要かを理解し、そこから逆算して取り組みます。

さらなるメリットとして、顧客やステークホルダーにとって重要なメトリクスを収集すれば、これらをほぼリアルタイムのダッシュボードで可視化でき、「ランディングページの読み込みにどのくらい時間がかかっているか」や「ウェブサイトの運用にどのくらいのコストがかかっているか」といった質問に答えるためのレポート作成を避けることができます。ステークホルダーや経営陣は、この情報をセルフサービスで取得できるようになります。

これらは、アプリケーションにとって**本当に重要な**高レベルのメトリクスであり、問題が発生していることを示すほぼ常に最良の指標でもあります。例えば、特定の期間内に通常予想されるよりも注文数が少ないことを示すアラートは、顧客に影響を与える問題がおそらく存在することを示しています。サーバー上のボリュームがほぼ満杯であることや、特定のサービスで 5xx エラーが多数発生していることを示すアラートは、修正が必要な場合もありますが、顧客への影響を理解してから優先順位を付ける必要があります。これには時間がかかる可能性があります。

顧客に影響を与える問題は、これらの高レベルのビジネスメトリクスを測定している場合に簡単に特定できます。これらのメトリクスは**何が**起こっているかを示します。その他のメトリクスや、トレーシングやログなどの他の形式のオブザーバビリティは、**なぜ**これが起こっているかを示し、それを修正または改善するために何ができるかを導きます。

## 何を観測するか

顧客にとって重要なことが理解できたら、重要業績評価指標 (KPI) を特定できます。これらは、ビジネス成果がリスクにさらされているかどうかを示す高レベルのメトリクスです。また、これらの KPI に影響を与える可能性のある多くの異なるソースから情報を収集する必要があります。ここで、これらの KPI に影響を与える可能性のあるメトリクスについて考え始める必要があります。前述のように、5xx エラーの数は影響を示すものではありませんが、KPI に影響を与える可能性があります。ビジネス成果に影響を与えるものから、ビジネス成果に影響を与える可能性のあるものまで、逆方向に作業を進めます。

収集する必要があるものを把握したら、KPI の測定に使用できるメトリクスと、それらの KPI に影響を与える可能性のある関連メトリクスを提供する情報源を特定する必要があります。これが観測対象の基盤となります。

このデータは、Metrics、Logs、Traces から取得される可能性があります。このデータを取得したら、成果がリスクにさらされているときにアラートを発行するために使用できます。

その後、影響を評価し、問題の修正を試みることができます。ほとんどの場合、このデータは、個別の技術的メトリクス (CPU やメモリなど) よりも先に、問題があることを示します。

オブザーバビリティは、ビジネス成果に影響を与える問題を修正するためにリアクティブに使用することも、顧客の検索エクスペリエンスを向上させるなどの目的でデータをプロアクティブに使用することもできます。

## まとめ

CPU、RAM、ディスク容量、その他の技術的なメトリクスは、スケーリング、パフォーマンス、キャパシティ、コストにとって重要ですが、アプリケーションの状態を実際に示すものではなく、カスタマーエクスペリエンスに関する洞察も提供しません。

重要なのは顧客であり、監視すべきは顧客のエクスペリエンスです。

そのため、顧客の要件から逆算して作業し、ステークホルダーと協力して、重要な KPI とメトリクスを確立する必要があります。
