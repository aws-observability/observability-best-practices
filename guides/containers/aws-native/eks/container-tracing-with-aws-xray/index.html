<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-guides/containers/aws-native/eks/container-tracing-with-aws-xray" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.8.1">
<title data-rh="true">Container Tracing with AWS X-Ray | AWS Observability Best Practices</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://aws-observability.github.io/observability-best-practices/guides/containers/aws-native/eks/container-tracing-with-aws-xray"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" property="og:locale:alternate" content="ja"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Container Tracing with AWS X-Ray | AWS Observability Best Practices"><meta data-rh="true" name="description" content="In this section of Observability best practices guide, we will deep dive on to following topics related to Container Tracing with AWS X-Ray :"><meta data-rh="true" property="og:description" content="In this section of Observability best practices guide, we will deep dive on to following topics related to Container Tracing with AWS X-Ray :"><link data-rh="true" rel="icon" href="/observability-best-practices/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://aws-observability.github.io/observability-best-practices/guides/containers/aws-native/eks/container-tracing-with-aws-xray"><link data-rh="true" rel="alternate" href="https://aws-observability.github.io/observability-best-practices/guides/containers/aws-native/eks/container-tracing-with-aws-xray" hreflang="en"><link data-rh="true" rel="alternate" href="https://aws-observability.github.io/observability-best-practices/ja/guides/containers/aws-native/eks/container-tracing-with-aws-xray" hreflang="ja"><link data-rh="true" rel="alternate" href="https://aws-observability.github.io/observability-best-practices/guides/containers/aws-native/eks/container-tracing-with-aws-xray" hreflang="x-default"><script data-rh="true" type="application/ld+json">{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Container Tracing with AWS X-Ray","item":"https://aws-observability.github.io/observability-best-practices/guides/containers/aws-native/eks/container-tracing-with-aws-xray"}]}</script><link rel="alternate" type="application/rss+xml" href="/observability-best-practices/blog/rss.xml" title="AWS Observability Best Practices RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/observability-best-practices/blog/atom.xml" title="AWS Observability Best Practices Atom Feed"><link rel="stylesheet" href="/observability-best-practices/assets/css/styles.760462fd.css">
<script src="/observability-best-practices/assets/js/runtime~main.97162bea.js" defer="defer"></script>
<script src="/observability-best-practices/assets/js/main.ff6a30dd.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<svg xmlns="http://www.w3.org/2000/svg" style="display: none;"><defs>
<symbol id="theme-svg-external-link" viewBox="0 0 24 24"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></symbol>
</defs></svg>
<script>!function(){var t=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();document.documentElement.setAttribute("data-theme",t||(window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light")),document.documentElement.setAttribute("data-theme-choice",t||"system")}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="theme-layout-navbar navbar navbar--fixed-top"><div class="navbar__inner"><div class="theme-layout-navbar-left navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/observability-best-practices/"><div class="navbar__logo"><img src="/observability-best-practices/img/logo.svg" alt="AWS Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/observability-best-practices/img/logo.svg" alt="AWS Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">AWS Observability Best Practices</b></a><a class="navbar__item navbar__link" href="/observability-best-practices/home">Home</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/observability-best-practices/guides/">Guides</a><a class="navbar__item navbar__link" href="/observability-best-practices/signals/logs">Signals</a><a class="navbar__item navbar__link" href="/observability-best-practices/tools/observability_accelerator">Tools</a><a class="navbar__item navbar__link" href="/observability-best-practices/recipes/">Recipes</a><a class="navbar__item navbar__link" href="/observability-best-practices/faq/general">FAQ</a><a class="navbar__item navbar__link" href="/observability-best-practices/patterns/Tracing/xrayec2">Patterns</a><a class="navbar__item navbar__link" href="/observability-best-practices/persona/cloud_engineer">Persona</a><a class="navbar__item navbar__link" href="/observability-best-practices/resources/">Resources</a><a class="navbar__item navbar__link" href="/observability-best-practices/mcp/">MCP</a><a class="navbar__item navbar__link" href="/observability-best-practices/contributors">Contributors</a></div><div class="theme-layout-navbar-right navbar__items navbar__items--right"><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link"><svg viewBox="0 0 24 24" width="20" height="20" aria-hidden="true" class="iconLanguage_nlXk"><path fill="currentColor" d="M12.87 15.07l-2.54-2.51.03-.03c1.74-1.94 2.98-4.17 3.71-6.53H17V4h-7V2H8v2H1v1.99h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11.76-2.04zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2l-4.5-12zm-2.62 7l1.62-4.33L19.12 17h-3.24z"></path></svg>English</a><ul class="dropdown__menu"><li><a href="/observability-best-practices/guides/containers/aws-native/eks/container-tracing-with-aws-xray" target="_self" rel="noopener noreferrer" class="dropdown__link dropdown__link--active" lang="en">English</a></li><li><a href="/observability-best-practices/ja/guides/containers/aws-native/eks/container-tracing-with-aws-xray" target="_self" rel="noopener noreferrer" class="dropdown__link" lang="ja">日本語</a></li></ul></div><a href="https://github.com/aws-observability/observability-best-practices" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="system mode" aria-label="Switch between dark and light mode (currently system mode)"><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP systemToggleIcon_QzmC"><path fill="currentColor" d="m12 21c4.971 0 9-4.029 9-9s-4.029-9-9-9-9 4.029-9 9 4.029 9 9 9zm4.95-13.95c1.313 1.313 2.05 3.093 2.05 4.95s-0.738 3.637-2.05 4.95c-1.313 1.313-3.093 2.05-4.95 2.05v-14c1.857 0 3.637 0.737 4.95 2.05z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"><div class="navbar__search searchBarContainer_NW3z" dir="ltr"><input placeholder="Search" aria-label="Search" class="navbar__search-input" value=""><div class="loadingRing_RJI3 searchBarLoadingRing_YnHq"><div></div><div></div><div></div><div></div></div></div></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="theme-layout-main main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" href="/observability-best-practices/guides/">Guides</a></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/observability-best-practices/guides/">Best practices overview</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/observability-best-practices/guides/choosing-a-tracing-agent">Choosing a tracing agent</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/observability-best-practices/guides/cost/kubecost">Cost</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/observability-best-practices/guides/databases/rds-and-aurora">Databases</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/observability-best-practices/guides/ec2-monitoring">EC2 Monitoring and Observability</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/observability-best-practices/guides/containers/aws-native/ecs/best-practices-metrics-collection-1">ECS best practices</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" tabindex="0" href="/observability-best-practices/guides/containers/aws-native/eks/amazon-cloudwatch-container-insights">EKS best practices</a></div><ul class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" tabindex="0" href="/observability-best-practices/guides/containers/aws-native/eks/amazon-cloudwatch-container-insights">AWS Native</a></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/observability-best-practices/guides/containers/aws-native/eks/amazon-cloudwatch-container-insights">Amazon CloudWatch Container Insights</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/observability-best-practices/guides/containers/aws-native/eks/log-aggregation">Log Aggregation</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/observability-best-practices/guides/containers/aws-native/eks/eks-api-server-monitoring">Amazon EKS API Server Monitoring</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/observability-best-practices/guides/containers/aws-native/eks/container-tracing-with-aws-xray">Container Tracing with AWS X-Ray</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/observability-best-practices/guides/containers/oss/eks/best-practices-metrics-collection">Open Source</a></div></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/observability-best-practices/guides/dotnet/aws-native/logs">.NET</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/observability-best-practices/guides/serverless/aws-native/lambda-based-observability">Serverless best practices</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/observability-best-practices/guides/hybrid-and-multicloud">Best practices for hybrid and multicloud</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/observability-best-practices/guides/operational/adot-at-scale/operating-adot-collector">Operational</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/observability-best-practices/guides/signal-collection/emf">Signal collection</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/observability-best-practices/guides/partners/databricks">Partners</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/observability-best-practices/guides/observability-maturity-model">AWS Observability Maturity Model</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/observability-best-practices/guides/cloudwatch_cross_account_observability">CloudWatch Cross-Account Observability</a></li></ul></li></ul></nav><button type="button" title="Collapse sidebar" aria-label="Collapse sidebar" class="button button--secondary button--outline collapseSidebarButton_PEFL"><svg width="20" height="20" aria-hidden="true" class="collapseSidebarButtonIcon_kv0_"><g fill="#7a7a7a"><path d="M9.992 10.023c0 .2-.062.399-.172.547l-4.996 7.492a.982.982 0 01-.828.454H1c-.55 0-1-.453-1-1 0-.2.059-.403.168-.551l4.629-6.942L.168 3.078A.939.939 0 010 2.528c0-.548.45-.997 1-.997h2.996c.352 0 .649.18.828.45L9.82 9.472c.11.148.172.347.172.55zm0 0"></path><path d="M19.98 10.023c0 .2-.058.399-.168.547l-4.996 7.492a.987.987 0 01-.828.454h-3c-.547 0-.996-.453-.996-1 0-.2.059-.403.168-.551l4.625-6.942-4.625-6.945a.939.939 0 01-.168-.55 1 1 0 01.996-.997h3c.348 0 .649.18.828.45l4.996 7.492c.11.148.168.347.168.55zm0 0"></path></g></svg></button></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/observability-best-practices/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Guides</span></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">EKS best practices</span></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">AWS Native</span></li><li class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link">Container Tracing with AWS X-Ray</span></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Container Tracing with AWS X-Ray</h1></header>
<p>In this section of Observability best practices guide, we will deep dive on to following topics related to Container Tracing with AWS X-Ray :</p>
<ul>
<li>Introduction to AWS X-Ray</li>
<li>Traces collection using Amazon EKS add-ons for AWS Distro for OpenTelemetry</li>
<li>Conclusion</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="introduction">Introduction<a href="#introduction" class="hash-link" aria-label="Direct link to Introduction" title="Direct link to Introduction">​</a></h3>
<p><a href="https://docs.aws.amazon.com/xray/latest/devguide/aws-xray.html" target="_blank" rel="noopener noreferrer">AWS X-Ray</a> is a service that collects data about requests that your application serves, and provides tools that you can use to view, filter, and gain insights into that data to identify issues and opportunities for optimization. For any traced request to your application, you can see detailed information not only about the request and response, but also about calls that your application makes to downstream AWS resources, microservices, databases, and web APIs.</p>
<p>Instrumenting your application involves sending trace data for incoming and outbound requests and other events within your application, along with metadata about each request. Many instrumentation scenarios require only configuration changes. For example, you can instrument all incoming HTTP requests and downstream calls to AWS services that your Java application makes. There are several SDKs, agents, and tools that can be used to instrument your application for X-Ray tracing. See <a href="https://docs.aws.amazon.com/xray/latest/devguide/xray-instrumenting-your-app.html" target="_blank" rel="noopener noreferrer">Instrumenting your application</a> for more information.</p>
<p>We will learn about about containerized application tracing by collect traces from your Amazon EKS cluster using Amazon EKS add-ons for AWS Distro for OpenTelemetry.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="traces-collection-using-amazon-eks-add-ons-for-aws-distro-for-opentelemetry">Traces collection using Amazon EKS add-ons for AWS Distro for OpenTelemetry<a href="#traces-collection-using-amazon-eks-add-ons-for-aws-distro-for-opentelemetry" class="hash-link" aria-label="Direct link to Traces collection using Amazon EKS add-ons for AWS Distro for OpenTelemetry" title="Direct link to Traces collection using Amazon EKS add-ons for AWS Distro for OpenTelemetry">​</a></h3>
<p><a href="https://aws.amazon.com/xray/" target="_blank" rel="noopener noreferrer">AWS X-Ray</a> provides application-tracing functionality, giving deep insights into all microservices deployed. With X-Ray, every request can be traced as it flows through the involved microservices. This provides your DevOps teams the insights they need to understand how your services interact with their peers and enables them to analyze and debug issues much faster.</p>
<p><a href="https://aws-otel.github.io/docs/introduction" target="_blank" rel="noopener noreferrer">AWS Distro for OpenTelemetry (ADOT)</a> is a secure, AWS-supported distribution of the OpenTelemetry project. Users can instrument their applications just once and, using ADOT, send correlated metrics and traces to multiple monitoring solutions. Amazon EKS now allows users to enable ADOT as an add-on at any time after the cluster is up and running. The ADOT add-on includes the latest security patches and bug fixes and is validated by AWS to work with Amazon EKS.</p>
<p>The ADOT add-on is an implementation of a Kubernetes Operator, which is a software extension to Kubernetes that makes use of custom resources to manage applications and their components. The add-on watches for a custom resource named OpenTelemetryCollector and manages the lifecycle of an ADOT Collector based on the configuration settings specified in the custom resource.</p>
<p>The ADOT Collector has the concept of a pipeline that comprises three key types of components, namely, receiver, processor, and exporter. A <a href="https://opentelemetry.io/docs/collector/configuration/#receivers" target="_blank" rel="noopener noreferrer">receiver</a> is how data gets into the collector. It accepts data in a specific format, translates it into the internal format, and passes it to <a href="https://opentelemetry.io/docs/collector/configuration/#processors" target="_blank" rel="noopener noreferrer">processors</a> and <a href="https://opentelemetry.io/docs/collector/configuration/#exporters" target="_blank" rel="noopener noreferrer">exporters</a> defined in the pipeline. It can be pull- or push-based. A processor is an optional component that is used to perform tasks such as batching, filtering, and transformations on data between being received and being exported. An exporter is used to determine which destination to send the metrics, logs, or traces to. The collector architecture allows multiple instances of such pipelines to be set up via a Kubernetes YAML manifest.</p>
<p>The following diagram illustrates an ADOT Collector configured with a traces pipeline, which sends telemetry data to AWS X-Ray. The traces pipeline comprises an instance of <a href="https://github.com/open-telemetry/opentelemetry-collector-contrib/tree/main/receiver/awsxrayreceiver" target="_blank" rel="noopener noreferrer">AWS X-Ray Receiver</a> and <a href="https://github.com/open-telemetry/opentelemetry-collector-contrib/tree/main/exporter/awsxrayexporter" target="_blank" rel="noopener noreferrer">AWS X-Ray Exporter</a> and sends traces to AWS X-Ray.</p>
<p><img decoding="async" loading="lazy" alt="Tracing-1" src="/observability-best-practices/assets/images/tracing-1-68aa93b75d26cd6481b1c810eb0db81a.jpg" width="1236" height="838" class="img_ev3q"></p>
<p><em>Figure: Traces collection using Amazon EKS add-ons for AWS Distro for OpenTelemetry.</em></p>
<p>Let’s delve into the details of installing the ADOT add-on in an EKS cluster and then collect telemetry data from workloads. The following is a list of prerequisites needed before we can install the ADOT add-on.</p>
<ul>
<li>An EKS cluster supporting Kubernetes version 1.19 or higher. You may create the EKS cluster using one of the <a href="https://docs.aws.amazon.com/eks/latest/userguide/create-cluster.html" target="_blank" rel="noopener noreferrer">approaches outlined here</a>.</li>
<li><a href="https://cert-manager.io/" target="_blank" rel="noopener noreferrer">Certificate Manager</a>, if not already installed in the cluster. It can be installed with the default configuration as per <a href="https://cert-manager.io/docs/installation/" target="_blank" rel="noopener noreferrer">this documentation</a>.</li>
<li>Kubernetes RBAC permissions specifically for EKS add-ons to install the ADOT add-on in your cluster. This can be done by applying the <a href="https://amazon-eks.s3.amazonaws.com/docs/addons-otel-permissions.yaml" target="_blank" rel="noopener noreferrer">settings in this YAML</a> file to the cluster using a CLI tool such as kubectl.</li>
</ul>
<p>You can check the list of add-ons enabled for different versions of EKS using the following command:</p>
<p><code>aws eks describe-addon-versions</code></p>
<p>The JSON output should list the ADOT add-on among others, as shown below. Note that when an EKS cluster is created, EKS add-ons does not install any add-ons on it.</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   &quot;addonName&quot;:&quot;adot&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   &quot;type&quot;:&quot;observability&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   &quot;addonVersions&quot;:[</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         &quot;addonVersion&quot;:&quot;v0.45.0-eksbuild.1&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         &quot;architecture&quot;:[</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;amd64&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         ],</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         &quot;compatibilities&quot;:[</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">               &quot;clusterVersion&quot;:&quot;1.22&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">               &quot;platformVersions&quot;:[</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                  &quot;*&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">               ],</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">               &quot;defaultVersion&quot;:true</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">               &quot;clusterVersion&quot;:&quot;1.21&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">               &quot;platformVersions&quot;:[</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                  &quot;*&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">               ],</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">               &quot;defaultVersion&quot;:true</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">               &quot;clusterVersion&quot;:&quot;1.20&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">               &quot;platformVersions&quot;:[</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                  &quot;*&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">               ],</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">               &quot;defaultVersion&quot;:true</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">               &quot;clusterVersion&quot;:&quot;1.19&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">               &quot;platformVersions&quot;:[</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                  &quot;*&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">               ],</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">               &quot;defaultVersion&quot;:true</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         ]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   ]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre></div></div>
<p>Next, you can install the ADOT add-on with the following command :</p>
<p><code>aws eks create-addon --addon-name adot --addon-version v0.45.0-eksbuild.1 --cluster-name $CLUSTER_NAME </code></p>
<p>The version string must match the value of <em>addonVersion</em> field in the previously shown output. The output from a successful execution of this command looks as follows:</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;addon&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;addonName&quot;: &quot;adot&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;clusterName&quot;: &quot;k8s-production-cluster&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;status&quot;: &quot;ACTIVE&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;addonVersion&quot;: &quot;v0.45.0-eksbuild.1&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;health&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;issues&quot;: []</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;addonArn&quot;: &quot;arn:aws:eks:us-east-1:123456789000:addon/k8s-production-cluster/adot/f0bff97c-0647-ef6f-eecf-0b2a13f7491b&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;createdAt&quot;: &quot;2022-04-04T10:36:56.966000+05:30&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;modifiedAt&quot;: &quot;2022-04-04T10:38:09.142000+05:30&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;tags&quot;: {}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre></div></div>
<p>Wait until the add-on is in ACTIVE status before proceeding to the next step. The status of the add-on can be checked using the following command ;</p>
<p><code>aws eks describe-addon --addon-name adot --cluster-name $CLUSTER_NAME</code></p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="deploying-the-adot-collector">Deploying the ADOT Collector<a href="#deploying-the-adot-collector" class="hash-link" aria-label="Direct link to Deploying the ADOT Collector" title="Direct link to Deploying the ADOT Collector">​</a></h4>
<p>The ADOT add-on is an implementation of a Kubernetes Operator, which is a software extension to Kubernetes that makes use of custom resources to manage applications and their components. The add-on watches for a custom resource named OpenTelemetryCollector and manages the lifecycle of an ADOT Collector based on the configuration settings specified in the custom resource. The following figure shows an illustration of how this works.</p>
<p><img decoding="async" loading="lazy" alt="Tracing-1" src="/observability-best-practices/assets/images/tracing-2-a28ca2c92462910a4d7a18350f4079b7.jpg" width="1408" height="962" class="img_ev3q"></p>
<p><em>Figure: Deploying the ADOT Collector.</em></p>
<p>Next, let’s take a look at how to deploy an ADOT Collector. The <a href="https://github.com/aws-observability/aws-o11y-recipes/blob/main/sandbox/eks-addon-adot/otel-collector-xray-prometheus-complete.yaml" target="_blank" rel="noopener noreferrer">YAML configuration file here</a> defines an OpenTelemetryCollector custom resource. When deployed to an EKS cluster, this will trigger the ADOT add-on to provision an ADOT Collector that includes a traces and metrics pipelines with components, as shown in the first illustration above. The collector is launched into the <code>aws-otel-eks</code> namespace as a Kubernetes Deployment with the name <code>${custom-resource-name}-collector</code>. A ClusterIP service with the same name is launched as well. Let’s look into the individual components that make up the pipelines of this collector.</p>
<p>The AWS X-Ray Receiver in the traces pipeline accepts segments or spans in <a href="https://docs.aws.amazon.com/xray/latest/devguide/xray-api-segmentdocuments.html" target="_blank" rel="noopener noreferrer">X-Ray Segment format</a>, which enables it to process segments sent by microservices instrumented with X-Ray SDK. It is configured to listen for traffic on UDP port 2000 and is exposed as a Cluster IP service. Per this configuration, workloads that want to send trace data to this receiver should be configured with the environment variable <code>AWS_XRAY_DAEMON_ADDRESS</code> set to <code>observability-collector.aws-otel-eks:2000</code>. The exporter sends these segments directly to X-Ray using the <a href="https://docs.aws.amazon.com/xray/latest/api/API_PutTraceSegments.html" target="_blank" rel="noopener noreferrer">PutTraceSegments</a> API.</p>
<p>ADOT Collector is configured to be launched under the identity of a Kubernetes service account named <code>aws-otel-collector</code>, which is granted these permissions using a ClusterRoleBinding and ClusterRole, also shown in the <a href="https://github.com/aws-observability/aws-o11y-recipes/blob/main/sandbox/eks-addon-adot/otel-collector-xray-prometheus-complete.yaml" target="_blank" rel="noopener noreferrer">configuration</a>. The exporters need IAM permissions to send data to X-Ray. This is done by associating the service account with an IAM role using the <a href="https://docs.aws.amazon.com/eks/latest/userguide/iam-roles-for-service-accounts.html" target="_blank" rel="noopener noreferrer">IAM roles for service accounts</a> feature supported by EKS. The IAM role should be associated with the AWS-managed policies such as AWSXRayDaemonWriteAccess. The <a href="https://github.com/aws-observability/aws-o11y-recipes/blob/main/sandbox/eks-addon-adot/adot-irsa.sh" target="_blank" rel="noopener noreferrer">helper script here</a> may be used, after setting the CLUSTER_NAME and REGION variables, to create an IAM role named <code>EKS-ADOT-ServiceAccount-Role</code> that is granted these permissions and is associated with the <code>aws-otel-collector</code> service account.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="end-to-end-test-of-traces-collection">End-to-end test of traces collection<a href="#end-to-end-test-of-traces-collection" class="hash-link" aria-label="Direct link to End-to-end test of traces collection" title="Direct link to End-to-end test of traces collection">​</a></h4>
<p>Let’s now put all this together and test traces collection from workloads deployed to an EKS cluster. The following illustration shows the setup employed for this test. It comprises a front-end service that exposes a set of REST APIs and interacts with S3 as well as a datastore service that, in turn, interacts with an instance of Aurora PostgreSQL database. The services are instrumented with X-Ray SDK. ADOT Collector is launched in Deployment mode by deploying an OpenTelemetryCollector custom resource using the YAML manifest that was discussed in the last section. Postman client is used as an external traffic generator, targeting the front-end service.</p>
<p><img decoding="async" loading="lazy" alt="Tracing-3" src="/observability-best-practices/assets/images/tracing-3-6eff725e6b951b40fb4b621ea0e39ee4.jpg" width="1122" height="692" class="img_ev3q"></p>
<p><em>Figure: End-to-end test of traces collection.</em></p>
<p>The following image shows the service graph generated by X-Ray using the segment data captured from the services, with the average response latency for each segment.</p>
<p><img decoding="async" loading="lazy" alt="Tracing-4" src="/observability-best-practices/assets/images/tracing-4-eda3b20a8a77493e3aaf43d2f3e7e54e.jpg" width="1276" height="636" class="img_ev3q"></p>
<p>Figure: CloudWatch Service Map console.*</p>
<p>Please check on <a href="https://github.com/aws-observability/aws-otel-community/blob/master/sample-configs/operator/collector-config-xray.yaml" target="_blank" rel="noopener noreferrer">Traces pipeline with OTLP Receiver and AWS X-Ray Exporter sending traces to AWS X-Ray</a> for OpenTelemetryCollector custom resource definitions that pertain to traces pipeline configurations. Customers who want to use ADOT Collector in conjunction with AWS X-Ray may start with these configuration templates, replace the placeholder variables with values based on their target environments and quickly deploy the collector to their Amazon EKS clusters using EKS add-on for ADOT.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="using-eks-blueprints-to-setup-container-tracing-with-aws-x-ray">Using EKS Blueprints to setup container tracing with AWS X-Ray<a href="#using-eks-blueprints-to-setup-container-tracing-with-aws-x-ray" class="hash-link" aria-label="Direct link to Using EKS Blueprints to setup container tracing with AWS X-Ray" title="Direct link to Using EKS Blueprints to setup container tracing with AWS X-Ray">​</a></h3>
<p><a href="https://aws.amazon.com/blogs/containers/bootstrapping-clusters-with-eks-blueprints/" target="_blank" rel="noopener noreferrer">EKS Blueprints</a> is a collection of Infrastructure as Code (IaC) modules that will help you configure and deploy consistent, batteries-included EKS clusters across accounts and regions. You can use EKS Blueprints to easily bootstrap an EKS cluster with <a href="https://docs.aws.amazon.com/eks/latest/userguide/eks-add-ons.html" target="_blank" rel="noopener noreferrer">Amazon EKS add-ons</a> as well as a wide range of popular open-source add-ons, including Prometheus, Karpenter, Nginx, Traefik, AWS Load Balancer Controller, Container Insights, Fluent Bit, Keda, Argo CD, and more. EKS Blueprints is implemented in two popular IaC frameworks, <a href="https://github.com/aws-ia/terraform-aws-eks-blueprints" target="_blank" rel="noopener noreferrer">HashiCorp Terraform</a> and <a href="https://github.com/aws-quickstart/cdk-eks-blueprints" target="_blank" rel="noopener noreferrer">AWS Cloud Development Kit (AWS CDK)</a>, which help you automate infrastructure deployments.</p>
<p>As part of your Amazon EKS Cluster creation process using EKS Blueprints, you can setup AWS X-Ray as a Day 2 operational tooling to collect, aggregate, and summarize metrics and logs from containerized applications and micro-services to Amazon CloudWatch console.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="conclusion">Conclusion<a href="#conclusion" class="hash-link" aria-label="Direct link to Conclusion" title="Direct link to Conclusion">​</a></h2>
<p>In this section of Observability best practices guide, we learned about using AWS X-Ray for container tracing your applications on Amazon EKS by traces collection using Amazon EKS add-ons for AWS Distro for OpenTelemetry. For further learning, please check on <a href="https://aws.amazon.com/blogs/containers/metrics-and-traces-collection-using-amazon-eks-add-ons-for-aws-distro-for-opentelemetry/" target="_blank" rel="noopener noreferrer">Metrics and traces collection using Amazon EKS add-ons for AWS Distro for OpenTelemetry to Amazon Managed Service for Prometheus and Amazon CloudWatch.</a> Finally we talked in brief about how use EKS Blueprints as a vehicle to setup Container tracing using AWS X-Ray during the Amazon EKS cluster creation process. For further deep dive, we would highly recommend you to practice X-Ray Traces module under <strong>AWS native</strong> Observability category of AWS <a href="https://catalog.workshops.aws/observability/en-US" target="_blank" rel="noopener noreferrer">One Observability Workshop</a>.</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col"><a href="https://github.com/aws-observability/observability-best-practices/blob/main/docusaurus/docs/guides/containers/aws-native/eks/container-tracing-with-aws-xray.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_JAkA"></div></div></footer></article><nav class="docusaurus-mt-lg pagination-nav" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/observability-best-practices/guides/containers/aws-native/eks/eks-api-server-monitoring"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Amazon EKS API Server Monitoring</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/observability-best-practices/guides/containers/oss/eks/best-practices-metrics-collection"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">EKS Observability : Essential Metrics</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#introduction" class="table-of-contents__link toc-highlight">Introduction</a></li><li><a href="#traces-collection-using-amazon-eks-add-ons-for-aws-distro-for-opentelemetry" class="table-of-contents__link toc-highlight">Traces collection using Amazon EKS add-ons for AWS Distro for OpenTelemetry</a></li><li><a href="#using-eks-blueprints-to-setup-container-tracing-with-aws-x-ray" class="table-of-contents__link toc-highlight">Using EKS Blueprints to setup container tracing with AWS X-Ray</a></li><li><a href="#conclusion" class="table-of-contents__link toc-highlight">Conclusion</a></li></ul></div></div></div></div></main></div></div></div><footer class="theme-layout-footer footer footer--dark"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="footer__copyright">Built with ❤️ at AWS. <br> © 2025.  Amazon.com, Inc. or its affiliates. All Rights Reserved.</div></div></div></footer></div>
</body>
</html>