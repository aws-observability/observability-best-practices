<!doctype html>
<html lang="ja" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-guides/containers/aws-native/eks/amazon-cloudwatch-container-insights" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.8.1">
<title data-rh="true">Amazon CloudWatch Container Insights | AWS Observability Best Practices</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://aws-observability.github.io/observability-best-practices/ja/guides/containers/aws-native/eks/amazon-cloudwatch-container-insights"><meta data-rh="true" property="og:locale" content="ja"><meta data-rh="true" property="og:locale:alternate" content="en"><meta data-rh="true" name="docusaurus_locale" content="ja"><meta data-rh="true" name="docsearch:language" content="ja"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Amazon CloudWatch Container Insights | AWS Observability Best Practices"><meta data-rh="true" name="description" content="オブザーバビリティのベストプラクティスガイドのこのセクションでは、Amazon CloudWatch Container Insights に関連する以下のトピックについて詳しく説明します："><meta data-rh="true" property="og:description" content="オブザーバビリティのベストプラクティスガイドのこのセクションでは、Amazon CloudWatch Container Insights に関連する以下のトピックについて詳しく説明します："><link data-rh="true" rel="icon" href="/observability-best-practices/ja/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://aws-observability.github.io/observability-best-practices/ja/guides/containers/aws-native/eks/amazon-cloudwatch-container-insights"><link data-rh="true" rel="alternate" href="https://aws-observability.github.io/observability-best-practices/guides/containers/aws-native/eks/amazon-cloudwatch-container-insights" hreflang="en"><link data-rh="true" rel="alternate" href="https://aws-observability.github.io/observability-best-practices/ja/guides/containers/aws-native/eks/amazon-cloudwatch-container-insights" hreflang="ja"><link data-rh="true" rel="alternate" href="https://aws-observability.github.io/observability-best-practices/guides/containers/aws-native/eks/amazon-cloudwatch-container-insights" hreflang="x-default"><script data-rh="true" type="application/ld+json">{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Amazon CloudWatch Container Insights","item":"https://aws-observability.github.io/observability-best-practices/ja/guides/containers/aws-native/eks/amazon-cloudwatch-container-insights"}]}</script><link rel="alternate" type="application/rss+xml" href="/observability-best-practices/ja/blog/rss.xml" title="AWS Observability Best Practices RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/observability-best-practices/ja/blog/atom.xml" title="AWS Observability Best Practices Atom Feed"><link rel="stylesheet" href="/observability-best-practices/ja/assets/css/styles.760462fd.css">
<script src="/observability-best-practices/ja/assets/js/runtime~main.b9d471ba.js" defer="defer"></script>
<script src="/observability-best-practices/ja/assets/js/main.d1039ec5.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<svg xmlns="http://www.w3.org/2000/svg" style="display: none;"><defs>
<symbol id="theme-svg-external-link" viewBox="0 0 24 24"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></symbol>
</defs></svg>
<script>!function(){var t=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();document.documentElement.setAttribute("data-theme",t||(window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light")),document.documentElement.setAttribute("data-theme-choice",t||"system")}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="メインコンテンツまでスキップ"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">メインコンテンツまでスキップ</a></div><nav aria-label="ナビゲーション" class="theme-layout-navbar navbar navbar--fixed-top"><div class="navbar__inner"><div class="theme-layout-navbar-left navbar__items"><button aria-label="ナビゲーションバーを開く" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/observability-best-practices/ja/"><div class="navbar__logo"><img src="/observability-best-practices/ja/img/logo.svg" alt="AWS Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/observability-best-practices/ja/img/logo.svg" alt="AWS Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">AWS Observability Best Practices</b></a><a class="navbar__item navbar__link" href="/observability-best-practices/ja/home">Home</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/observability-best-practices/ja/guides/">Guides</a><a class="navbar__item navbar__link" href="/observability-best-practices/ja/signals/logs">Signals</a><a class="navbar__item navbar__link" href="/observability-best-practices/ja/tools/observability_accelerator">Tools</a><a class="navbar__item navbar__link" href="/observability-best-practices/ja/recipes/">Recipes</a><a class="navbar__item navbar__link" href="/observability-best-practices/ja/faq/general">FAQ</a><a class="navbar__item navbar__link" href="/observability-best-practices/ja/patterns/Tracing/xrayec2">Patterns</a><a class="navbar__item navbar__link" href="/observability-best-practices/ja/persona/cloud_engineer">Persona</a><a class="navbar__item navbar__link" href="/observability-best-practices/ja/resources/">Resources</a><a class="navbar__item navbar__link" href="/observability-best-practices/ja/contributors">Contributors</a></div><div class="theme-layout-navbar-right navbar__items navbar__items--right"><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link"><svg viewBox="0 0 24 24" width="20" height="20" aria-hidden="true" class="iconLanguage_nlXk"><path fill="currentColor" d="M12.87 15.07l-2.54-2.51.03-.03c1.74-1.94 2.98-4.17 3.71-6.53H17V4h-7V2H8v2H1v1.99h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11.76-2.04zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2l-4.5-12zm-2.62 7l1.62-4.33L19.12 17h-3.24z"></path></svg>日本語</a><ul class="dropdown__menu"><li><a href="/observability-best-practices/guides/containers/aws-native/eks/amazon-cloudwatch-container-insights" target="_self" rel="noopener noreferrer" class="dropdown__link" lang="en">English</a></li><li><a href="/observability-best-practices/ja/guides/containers/aws-native/eks/amazon-cloudwatch-container-insights" target="_self" rel="noopener noreferrer" class="dropdown__link dropdown__link--active" lang="ja">日本語</a></li></ul></div><a href="https://github.com/aws-observability/observability-best-practices" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="システムモード" aria-label="ダークモードを切り替える(現在はシステムモード)"><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP systemToggleIcon_QzmC"><path fill="currentColor" d="m12 21c4.971 0 9-4.029 9-9s-4.029-9-9-9-9 4.029-9 9 4.029 9 9 9zm4.95-13.95c1.313 1.313 2.05 3.093 2.05 4.95s-0.738 3.637-2.05 4.95c-1.313 1.313-3.093 2.05-4.95 2.05v-14c1.857 0 3.637 0.737 4.95 2.05z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"><div class="navbar__search searchBarContainer_NW3z" dir="ltr"><input placeholder="Search" aria-label="Search" class="navbar__search-input" value=""><div class="loadingRing_RJI3 searchBarLoadingRing_YnHq"><div></div><div></div><div></div><div></div></div></div></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="theme-layout-main main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="先頭へ戻る" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="ドキュメントのサイドバー" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" href="/observability-best-practices/ja/guides/">Guides</a></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/observability-best-practices/ja/guides/">ベストプラクティスの概要</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/observability-best-practices/ja/guides/choosing-a-tracing-agent">トレーシングエージェントの選択</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/observability-best-practices/ja/guides/cost/kubecost">Cost</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/observability-best-practices/ja/guides/databases/rds-and-aurora">Databases</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/observability-best-practices/ja/guides/ec2-monitoring">EC2 のモニタリングとオブザーバビリティ</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/observability-best-practices/ja/guides/containers/aws-native/ecs/best-practices-metrics-collection-1">ECS best practices</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" tabindex="0" href="/observability-best-practices/ja/guides/containers/aws-native/eks/amazon-cloudwatch-container-insights">EKS best practices</a></div><ul class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" tabindex="0" href="/observability-best-practices/ja/guides/containers/aws-native/eks/amazon-cloudwatch-container-insights">AWS Native</a></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/observability-best-practices/ja/guides/containers/aws-native/eks/amazon-cloudwatch-container-insights">Amazon CloudWatch Container Insights</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/observability-best-practices/ja/guides/containers/aws-native/eks/log-aggregation">ログ集約</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/observability-best-practices/ja/guides/containers/aws-native/eks/eks-api-server-monitoring">Amazon EKS API サーバーのモニタリング</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/observability-best-practices/ja/guides/containers/aws-native/eks/container-tracing-with-aws-xray">AWS X-Ray を使用したコンテナトレーシング</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/observability-best-practices/ja/guides/containers/oss/eks/best-practices-metrics-collection">Open Source</a></div></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/observability-best-practices/ja/guides/dotnet/aws-native/logs">.NET</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/observability-best-practices/ja/guides/serverless/aws-native/lambda-based-observability">Serverless best practices</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/observability-best-practices/ja/guides/hybrid-and-multicloud">ハイブリッドクラウドとマルチクラウドのベストプラクティス</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/observability-best-practices/ja/guides/operational/adot-at-scale/operating-adot-collector">Operational</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/observability-best-practices/ja/guides/signal-collection/emf">Signal collection</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/observability-best-practices/ja/guides/partners/databricks">Partners</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/observability-best-practices/ja/guides/observability-maturity-model">AWS オブザーバビリティ成熟度モデル</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/observability-best-practices/ja/guides/cloudwatch_cross_account_observability">CloudWatch クロスアカウントオブザーバビリティ</a></li></ul></li></ul></nav><button type="button" title="サイドバーを隠す" aria-label="サイドバーを隠す" class="button button--secondary button--outline collapseSidebarButton_PEFL"><svg width="20" height="20" aria-hidden="true" class="collapseSidebarButtonIcon_kv0_"><g fill="#7a7a7a"><path d="M9.992 10.023c0 .2-.062.399-.172.547l-4.996 7.492a.982.982 0 01-.828.454H1c-.55 0-1-.453-1-1 0-.2.059-.403.168-.551l4.629-6.942L.168 3.078A.939.939 0 010 2.528c0-.548.45-.997 1-.997h2.996c.352 0 .649.18.828.45L9.82 9.472c.11.148.172.347.172.55zm0 0"></path><path d="M19.98 10.023c0 .2-.058.399-.168.547l-4.996 7.492a.987.987 0 01-.828.454h-3c-.547 0-.996-.453-.996-1 0-.2.059-.403.168-.551l4.625-6.942-4.625-6.945a.939.939 0 01-.168-.55 1 1 0 01.996-.997h3c.348 0 .649.18.828.45l4.996 7.492c.11.148.168.347.168.55zm0 0"></path></g></svg></button></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="パンくずリストのナビゲーション"><ul class="breadcrumbs"><li class="breadcrumbs__item"><a aria-label="ホームページ" class="breadcrumbs__link" href="/observability-best-practices/ja/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Guides</span></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">EKS best practices</span></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">AWS Native</span></li><li class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link">Amazon CloudWatch Container Insights</span></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">このページの見出し</button></div><div class="theme-doc-markdown markdown"><header><h1>Amazon CloudWatch Container Insights</h1></header>
<p>オブザーバビリティのベストプラクティスガイドのこのセクションでは、Amazon CloudWatch Container Insights に関連する以下のトピックについて詳しく説明します：</p>
<ul>
<li>Amazon CloudWatch Container Insights の概要</li>
<li>AWS Distro for OpenTelemetry を使用した Amazon CloudWatch Container Insights の活用</li>
<li>Amazon EKS における CloudWatch Container Insights での Fluent Bit の統合</li>
<li>Amazon EKS での Container Insights によるコスト削減</li>
<li>EKS Blueprints を使用した Container Insights のセットアップ</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="はじめに">はじめに<a href="#はじめに" class="hash-link" aria-label="はじめに への直接リンク" title="はじめに への直接リンク">​</a></h3>
<p><a href="https://docs.aws.amazon.com/ja_jp/AmazonCloudWatch/latest/monitoring/ContainerInsights.html" target="_blank" rel="noopener noreferrer">Amazon CloudWatch Container Insights</a> は、コンテナ化されたアプリケーションとマイクロサービスからメトリクスとログを収集、集約、要約するのに役立ちます。メトリクスデータは、<a href="https://docs.aws.amazon.com/ja_jp/AmazonCloudWatch/latest/monitoring/CloudWatch_Embedded_Metric_Format.html" target="_blank" rel="noopener noreferrer">埋め込みメトリクスフォーマット</a> を使用してパフォーマンスログイベントとして収集されます。これらのパフォーマンスログイベントは、高カーディナリティデータをスケールに応じて取り込み、保存できる構造化された JSON スキーマを使用します。このデータから、CloudWatch はクラスター、ノード、Pod、タスク、サービスレベルで集約されたメトリクスを CloudWatch メトリクスとして作成します。Container Insights が収集するメトリクスは、CloudWatch の自動ダッシュボードで利用できます。Container Insights は、セルフマネージドノードグループ、マネージドノードグループ、AWS Fargate プロファイルを持つ Amazon EKS クラスターで利用できます。</p>
<p>コスト最適化の観点から、また Container Insights のコストを管理するために、CloudWatch はログデータから可能なすべてのメトリクスを自動的に作成するわけではありません。ただし、CloudWatch Logs Insights を使用して生のパフォーマンスログイベントを分析することで、追加のメトリクスとより詳細な粒度を表示できます。Container Insights によっ  て収集されるメトリクスはカスタムメトリクスとして課金されます。CloudWatch の料金について詳しくは、<a href="https://aws.amazon.com/jp/cloudwatch/pricing/" target="_blank" rel="noopener noreferrer">Amazon CloudWatch の料金</a> をご覧ください。</p>
<p>Amazon EKS では、Container Insights は Amazon Elastic Container Registry を通じて Amazon が提供する <a href="https://gallery.ecr.aws/cloudwatch-agent/cloudwatch-agent" target="_blank" rel="noopener noreferrer">CloudWatch エージェント</a> のコンテナ化バージョンを使用して、クラスター内で実行中のすべてのコンテナを検出します。その後、パフォーマンススタックのあらゆる層でパフォーマンスデータを収集します。Container Insights は、収集するログとメトリクスに対して AWS KMS キーによる暗号化をサポートしています。この暗号化を有効にするには、Container Insights データを受け取るロググループに対して AWS KMS 暗号化を手動で有効にする必要があります。これにより、CloudWatch Container Insights は提供された AWS KMS キーを使用してこのデータを暗号化します。対称キーのみがサポートされており、ロググループの暗号化に非対称 AWS KMS キーはサポートされていません。Container Insights は Linux インスタンスでのみサポートされています。Amazon EKS 向け Container Insights は、<a href="https://docs.aws.amazon.com/ja_jp/AmazonCloudWatch/latest/monitoring/ContainerInsights.html" target="_blank" rel="noopener noreferrer">これらの</a> AWS リージョンでサポートされています。</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="aws-distro-for-open-telemetry-を使用した-amazon-cloudwatch-container-insights">AWS Distro for Open Telemetry を使用した Amazon CloudWatch Container Insights<a href="#aws-distro-for-open-telemetry-を使用した-amazon-cloudwatch-container-insights" class="hash-link" aria-label="AWS Distro for Open Telemetry を使用した Amazon CloudWatch Container Insights への直接リンク" title="AWS Distro for Open Telemetry を使用した Amazon CloudWatch Container Insights への直接リンク">​</a></h3>
<p>ここでは、Amazon EKS ワークロードから Container Insights メトリクスの収集を可能にするオプションの 1 つである <a href="https://aws-otel.github.io/docs/introduction" target="_blank" rel="noopener noreferrer">AWS Distro for OpenTelemetry (ADOT)</a> について詳しく説明します。<a href="https://aws-otel.github.io/docs/introduction" target="_blank" rel="noopener noreferrer">AWS Distro for OpenTelemetry (ADOT)</a> は、<a href="https://opentelemetry.io/docs/" target="_blank" rel="noopener noreferrer">OpenTelemetry</a> プロジェクトの AWS がサポートする安全なディストリビューションです。</p>
<p>ADOT を使用すると、アプリケーションを一度だけ計装することで、相関のあるメトリクスとトレースを複数のモニタリングソリューションに送信できます。CloudWatch Container Insights 向けの ADOT サポートにより、お客様は <a href="https://aws.amazon.com/pm/ec2/?trk=ps_a134p000004f2ZFAAY&amp;trkCampaign=acq_paid_search_brand&amp;sc_channel=PS&amp;sc_campaign=acquisition_US&amp;sc_publisher=Google&amp;sc_category=Cloud%20Computing&amp;sc_country=US&amp;sc_geo=NAMER&amp;sc_outcome=acq&amp;sc_detail=amazon%20ec2&amp;sc_content=EC2_e&amp;sc_matchtype=e&amp;sc_segment=467723097970&amp;sc_medium=ACQ-P%7CPS-GO%7CBrand%7CDesktop%7CSU%7CCloud%20Computing%7CEC2%7CUS%7CEN%7CText&amp;s_kwcid=AL!4422!3!467723097970!e!!g!!amazon%20ec2&amp;ef_id=Cj0KCQiArt6PBhCoARIsAMF5waj-FXPUD0G-cm0dJ05Mz6aXDvqEGu-S7pCXwvVusULN6ZbPbc_Alg8aArOHEALw_wcB:G:s&amp;s_kwcid=AL!4422!3!467723097970!e!!g!!amazon%20ec2" target="_blank" rel="noopener noreferrer">Amazon Elastic Cloud Compute</a> (Amazon EC2) 上で実行されている Amazon EKS クラスターから CPU、メモリ、ディスク、ネットワーク使用量などのシステムメトリクスを収集できます。これは Amazon CloudWatch エージェントと同じ体験を提供します。</p>
<p>ADOT Collector は、Amazon EKS および AWS Fargate プロファイル for Amazon EKS 向けの CloudWatch Container Insights のサポートを提供しています。お客様は、Amazon EKS クラスターにデプロイされた Pod の CPU やメモリ使用率などのコンテナと Pod のメトリクスを収集し、既存の CloudWatch Container Insights の体験を変更することなく CloudWatch ダッシュボードで確認できるようになりました。これにより、お客様はトラフィックに応じてスケールアップまたはダウンを判断し、コストを削減することができます。</p>
<p>ADOT Collector には、Receiver、Processor、Exporter という 3 つの主要なコンポーネントで構成される<a href="https://opentelemetry.io/docs/collector/configuration/" target="_blank" rel="noopener noreferrer">パイプラインの概念</a>があります。<a href="https://opentelemetry.io/docs/collector/configuration/#receivers" target="_blank" rel="noopener noreferrer">Receiver</a> は、データがコレクターに取り込まれる方法です。指定された形式でデータを受け取り、内部形式に変換し、パイプラインで定義された <a href="https://opentelemetry.io/docs/collector/configuration/#processors" target="_blank" rel="noopener noreferrer">Processors</a> と <a href="https://opentelemetry.io/docs/collector/configuration/#exporters" target="_blank" rel="noopener noreferrer">Exporters</a> に渡します。これはプルまたはプッシュベースで行うことができます。</p>
<p>Processor は、受信されてからエクスポートされるまでの間にデータのバッチ処理、フィルタリング、変換などのタスクを実行するためのオプショ ンのコンポーネントです。Exporter は、メトリクス、ログ、またはトレースを送信する宛先を決定するために使用されます。コレクターのアーキテクチャでは、YAML 設定を通じてこのようなパイプラインの複数のインスタンスを定義できます。以下の図は、Amazon EKS および Fargate プロファイル付きの Amazon EKS にデプロイされた ADOT Collector インスタンスのパイプラインコンポーネントを示しています。</p>
<p><img decoding="async" loading="lazy" alt="CW-ADOT-EKS" src="/observability-best-practices/ja/assets/images/cw-adot-collector-pipeline-eks-a57495e3ee941a7dc20d9239727c5e9e.jpg" width="1648" height="1096" class="img_ev3q"></p>
<p><em>図：Amazon EKS にデプロイされた ADOT Collector インスタンスのパイプラインコンポーネント</em></p>
<p>上記のアーキテクチャでは、パイプラインで <a href="https://github.com/open-telemetry/opentelemetry-collector-contrib/tree/main/receiver/awscontainerinsightreceiver" target="_blank" rel="noopener noreferrer">AWS Container Insights Receiver</a> のインスタンスを使用し、Kubelet から直接メトリクスを収集しています。AWS Container Insights Receiver (<code>awscontainerinsightreceiver</code>) は、<a href="https://docs.aws.amazon.com/ja_jp/AmazonCloudWatch/latest/monitoring/ContainerInsights.html" target="_blank" rel="noopener noreferrer">CloudWatch Container Insights</a> をサポートする AWS 固有の Receiver です。</p>
<p>CloudWatch Container Insights は、コンテナ化されたアプリケーションとマイクロサービスからメトリクスとログを収集、集約、要約します。データは <a href="https://docs.aws.amazon.com/ja_jp/AmazonCloudWatch/latest/monitoring/CloudWatch_Embedded_Metric_Format.html" target="_blank" rel="noopener noreferrer">埋め込みメトリクスフォーマット</a> を使用してパフォーマンスログイベントとして収集されます。EMF データから、Amazon CloudWatch はクラスター、ノード、Pod、タスク、サービスレベルで集約された CloudWatch メトリクスを作成できます。以下は <code>awscontainerinsightreceiver</code> 設定のサンプル例です：</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">receivers:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  awscontainerinsightreceiver:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    # all parameters are optional</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    collection_interval: 60s</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    container_orchestrator: eks</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    add_service_as_attribute: true </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    prefer_full_pod_name: false </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    add_full_pod_name_metric_label: false </span><br></span></code></pre></div></div>
<p>これには、上記の設定を使用して Amazon EKS 上に DaemonSet としてコレクターをデプロイすることが含まれます。また、この Receiver が Kubelet から直接収集する、より完全なメトリクスセットにアクセスできます。クラスター内のすべてのノードからリソースメトリクスを収集するには、ADOT Collector の複数のインスタンスがあれば十分です。ADOT Collector の単一インスタンスは高負荷時に過負荷になる可能性があるため、常に複数のコレクターをデプロイすることをお勧めします。</p>
<p><img decoding="async" loading="lazy" alt="CW-ADOT-FARGATE" src="/observability-best-practices/ja/assets/images/cw-adot-collector-pipeline-7ac4d843c5bd5c85f737b1a86e546950.jpg" width="2280" height="1430" class="img_ev3q"></p>
<p><em>図：Fargate プロファイル付き Amazon EKS にデプロイされた ADOT Collector インスタンスのパイプラインコンポーネント</em></p>
<p>上記のアーキテクチャでは、Kubernetes クラスター内のワーカーノード上の Kubelet が、<em>/metrics/cadvisor</em> エンドポイントで CPU、メモリ、ディスク、ネットワーク使用量などのリソースメトリクスを公開しています。しかし、EKS Fargate のネットワークアーキテクチャでは、Pod がそのワーカーノード上の Kubelet に直接アクセスすることはできません。</p>
<p>そのため、ADOT Collector は Kubernetes API サーバーを呼び出してワーカーノード上の Kubelet への接続をプロキシし、そのノード上のワークロードの Kubelet の cAdvisor メトリクスを収集します。これらのメトリクスは Prometheus 形式で利用可能です。したがって、コレクターは Prometheus サーバーの代替として <a href="https://github.com/open-telemetry/opentelemetry-collector-contrib/tree/main/receiver/prometheusreceiver" target="_blank" rel="noopener noreferrer">Prometheus Receiver</a> のインスタンスを使用し、Kubernetes API サーバーエンドポイントからこれらのメトリクスをスクレイピングします。</p>
<p>Kubernetes サービスディスカバリを使用して、Receiver は EKS クラスター内のすべてのワーカーノードを検出できます。したがって、クラスター内のすべてのノードからリソースメトリクスを収集するには、ADOT Collector の複数のインスタンスがあれば十分です。ADOT Collector の単一インスタンスは高負荷時に過負荷になる可能性があるため、常に複数のコレクターをデプロイすることをお勧めします。</p>
<p>メトリクスは、フィルタリング、名前の変更、データの集約と変換などを実行する一連の Processor を通過します。以下は、上記の Amazon EKS 用の ADOT Collector インスタンスのパイプラインで使用される Processor のリストです。</p>
<ul>
<li><a href="https://github.com/open-telemetry/opentelemetry-collector-contrib/tree/main/processor/filterprocessor" target="_blank" rel="noopener noreferrer">Filter Processor</a> は、名前に基づいてメトリクスを含めるか除外するための AWS OpenTelemetry ディストリビューションの一部です。不要なメトリクスをフィルタリングするために、メトリクス収集パイプラインの一部として使用できます。たとえば、Container Insights でネットワーク関連のメトリクス（名前のプレフィックスが <code>pod_network</code> のもの）を除外し、Pod レベルのメトリクス（名前のプレフィックスが <code>pod_</code> のもの）のみを収集したい場合があります。</li>
</ul>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">      # filter out only renamed metrics which we care about</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      filter:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        metrics:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          include:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            match_type: regexp</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            metric_names:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              - new_container_.*</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              - pod_.*</span><br></span></code></pre></div></div>
<ul>
<li><a href="https://github.com/open-telemetry/opentelemetry-collector-contrib/tree/main/processor/metricstransformprocessor" target="_blank" rel="noopener noreferrer">Metrics Transform Processor</a> は、メトリクスの名前変更、ラベルキーと値の追加、名前変更、削除に使用できます。また、ラベルまたはラベル値全体でメトリクスのスケーリングと集約を実行するためにも使用できます。</li>
</ul>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">     metricstransform/rename:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        transforms:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          - include: container_spec_cpu_quota</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            new_name: new_container_cpu_limit_raw</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            action: insert</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            match_type: regexp</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            experimental_match_labels: {&quot;container&quot;: &quot;\\S&quot;}</span><br></span></code></pre></div></div>
<ul>
<li><a href="https://github.com/open-telemetry/opentelemetry-collector-contrib/tree/main/processor/cumulativetodeltaprocessor" target="_blank" rel="noopener noreferrer">Cumulative to Delta Processor</a> は、単調増加の累積和とヒストグラムメトリクスを単調増加のデルタメトリクスに変換します。非単調増加の和と指数ヒストグラムは除外されます。</li>
</ul>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">` # convert cumulative sum datapoints to delta</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> cumulativetodelta:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    metrics:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        - pod_cpu_usage_seconds_total </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        - pod_network_rx_errors`</span><br></span></code></pre></div></div>
<ul>
<li><a href="https://github.com/open-telemetry/opentelemetry-collector-contrib/tree/main/processor/deltatorateprocessor" target="_blank" rel="noopener noreferrer">Delta to Rate Processor</a> は、デルタ和メトリクスをレートメトリクスに変換します。こ のレートはゲージです。</li>
</ul>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">` # convert delta to rate</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    deltatorate:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        metrics:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            - pod_memory_hierarchical_pgfault </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            - pod_memory_hierarchical_pgmajfault </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            - pod_network_rx_bytes </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            - pod_network_rx_dropped </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            - pod_network_rx_errors </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            - pod_network_tx_errors </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            - pod_network_tx_packets </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            - new_container_memory_pgfault </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            - new_container_memory_pgmajfault </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            - new_container_memory_hierarchical_pgfault </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            - new_container_memory_hierarchical_pgmajfault`</span><br></span></code></pre></div></div>
<ul>
<li><a href="https://github.com/open-telemetry/opentelemetry-collector-contrib/tree/main/processor/metricsgenerationprocessor" target="_blank" rel="noopener noreferrer">Metrics Generation Processor</a> は、与えられたルールに従って既存のメトリクスを使用して新しいメトリクスを作成するために使用できます。</li>
</ul>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">      experimental_metricsgeneration/1:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        rules:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          - name: pod_memory_utilization_over_pod_limit</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            unit: Percent</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            type: calculate</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            metric1: pod_memory_working_set</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            metric2: pod_memory_limit</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            operation: percent</span><br></span></code></pre></div></div>
<p>パイプラインの最後のコンポーネントは <a href="https://github.com/open-telemetry/opentelemetry-collector-contrib/tree/main/exporter/awsemfexporter" target="_blank" rel="noopener noreferrer">AWS CloudWatch EMF Exporter</a> で、メトリクスを埋め込みメトリクスフォーマット (EMF) に変換し、<a href="https://docs.aws.amazon.com/ja_jp/AmazonCloudWatch/latest/APIReference/API_PutLogEvents.html" target="_blank" rel="noopener noreferrer">PutLogEvents</a> API を使用して CloudWatch Logs に直接送信します。以下は、Amazon EKS 上で実行されている各ワークロードについて ADOT Collector が CloudWatch に送信するメトリクスのリストです。</p>
<ul>
<li>pod_cpu_utilization_over_pod_limit</li>
<li>pod_cpu_usage_total</li>
<li>pod_cpu_limit</li>
<li>pod_memory_utilization_over_pod_limit</li>
<li>pod_memory_working_set</li>
<li>pod_memory_limit</li>
<li>pod_network_rx_bytes</li>
<li>pod_network_tx_bytes</li>
</ul>
<p>各メトリクスには以下のディメンションセットが関連付けられ、<em>ContainerInsights</em> という CloudWatch 名前空間の下で収集されます。</p>
<ul>
<li>ClusterName, LaunchType</li>
<li>ClusterName, Namespace, LaunchType</li>
<li>ClusterName, Namespace, PodName, LaunchType</li>
</ul>
<p>さらに、<a href="https://aws.amazon.com/jp/blogs/news/introducing-cloudwatch-container-insights-prometheus-support-with-aws-distro-for-opentelemetry-on-amazon-ecs-and-amazon-eks/" target="_blank" rel="noopener noreferrer">ADOT の Container Insights Prometheus サポート</a> および <a href="https://aws.amazon.com/jp/blogs/news/introducing-amazon-cloudwatch-container-insights-for-amazon-eks-fargate-using-aws-distro-for-opentelemetry/" target="_blank" rel="noopener noreferrer">CloudWatch Container Insights を使用して Amazon EKS リソースメトリクスを可視化するための Amazon EKS への ADOT Collector のデプロイ</a> について学習し、Amazon EKS クラスターで ADOT Collector パイプラインをセットアップし、CloudWatch Container Insights で Amazon EKS リソースメトリクスを可視化する方 法を確認してください。</p>
<p>また、<a href="https://community.aws/tutorials/navigating-amazon-eks/eks-monitor-containerized-applications#step-3-use-cloudwatch-logs-insights-query-to-search-and-analyze-container-logs" target="_blank" rel="noopener noreferrer">Amazon CloudWatch Container Insights を使用したコンテナ化アプリケーションの簡単なモニタリング</a> を参照してください。これには、Amazon EKS クラスターの設定、コンテナ化アプリケーションのデプロイ、Container Insights を使用したアプリケーションのパフォーマンスモニタリングに関するステップバイステップの手順が含まれています。</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="amazon-eks-向け-cloudwatch-container-insights-における-fluent-bit-の統合">Amazon EKS 向け CloudWatch Container Insights における Fluent Bit の統合<a href="#amazon-eks-向け-cloudwatch-container-insights-における-fluent-bit-の統合" class="hash-link" aria-label="Amazon EKS 向け CloudWatch Container Insights における Fluent Bit の統合 への直接リンク" title="Amazon EKS 向け CloudWatch Container Insights における Fluent Bit の統合 への直接リンク">​</a></h3>
<p><a href="https://fluentbit.io/" target="_blank" rel="noopener noreferrer">Fluent Bit</a> は、オープンソースのマルチプラットフォームログプロセッサおよびフォワーダーで、さまざまなソースからデータとログを収集し、それらを統合して CloudWatch Logs を含むさまざまな送信先に送信することができます。また、<a href="https://www.docker.com/" target="_blank" rel="noopener noreferrer">Docker</a> や <a href="https://kubernetes.io/" target="_blank" rel="noopener noreferrer">Kubernetes</a> 環境とも完全に互換性があります。新しく導入された Fluent Bit デーモンセットを使用することで、EKS クラスターからコンテナログを CloudWatch Logs に送信し、ログの保存と分析を行うことができます。</p>
<p>軽量な特性を活かし、EKS ワーカーノードの Container Insights でデフォルトのログフォワーダーとして Fluent Bit を使用することで、アプリケーションログを効率的かつ確実に CloudWatch Logs にストリーミングできます。Fluent Bit を使用することで、Container Insights は Pod レベルでの CPU とメモリ使用量の面で特に効率的に、数千の重要なビジネスログを大規模に配信することができます。つまり、以前使用されていたログフォワーダーの FluentD と比較して、Fluent Bit はリソースフットプリントが小さく、結果としてメモリと CPU のリソース効率が向上します。一方、Fluent Bit と関連プラグインを含む <a href="https://github.com/aws/aws-for-fluent-bit" target="_blank" rel="noopener noreferrer">AWS for Fluent Bit イメージ</a> は、AWS エコシステム内での統一されたエクスペリエンスを提供することを目的としているため、Fluent Bit に新しい AWS 機能をより迅速に採用する柔軟性を追加で提供します。</p>
<p>以下のアーキテクチャは、EKS 向け CloudWatch Container Insights で使用される個々のコンポーネントを示しています：</p>
<p><img decoding="async" loading="lazy" alt="CW-COMPONENTS" src="/observability-best-practices/ja/assets/images/cw-components-0a6886b7b1f1c933135cc484fe01f3b9.jpg" width="751" height="570" class="img_ev3q"></p>
<p><em>図：EKS 向け CloudWatch Container Insights で使用される個々のコンポーネント</em></p>
<p>コンテナを扱う際は、Docker JSON ロギングドライバーを使用して、アプリケーションログを含むすべてのログを可能な限り標準出力 (stdout) と標準エラー出力 (stderr) を通じて出力することが推奨されます。このため、EKS ではロギングド ライバーがデフォルトで設定されており、コンテナ化されたアプリケーションが <code>stdout</code> または <code>stderr</code> に書き込むすべての内容は、ワーカーノードの <code>&quot;/var/log/containers&quot;</code> 配下の JSON ファイルにストリーミングされます。Container Insights は、これらのログをデフォルトで 3 つのカテゴリに分類し、Fluent Bit 内に専用の入力ストリームを作成し、CloudWatch Logs 内に独立したロググループを作成します。これらのカテゴリは以下の通りです：</p>
<ul>
<li>
<p>アプリケーションログ：<code>&quot;/var/log/containers/*.log&quot;</code> 配下に保存されるすべてのアプリケーションログは、専用の <code>/aws/containerinsights/Cluster_Name/application</code> ロググループにストリーミングされます。kube-proxy や aws-node ログなどの非アプリケーションログは、デフォルトで除外されます。ただし、CoreDNS ログなどの追加の Kubernetes アドオンログも処理され、このロググループにストリーミングされます。</p>
</li>
<li>
<p>ホストログ：各 EKS ワーカーノードのシステムログは、<code>/aws/containerinsights/Cluster_Name/host</code> ロググループにストリーミングされます。これらのシステムログには、<code>&quot;/var/log/messages,/var/log/dmesg,/var/log/secure&quot;</code> ファイルの内容が含まれます。コンテナ化されたワークロードはステートレスで動的な性質を持ち、EKS ワーカーノードはスケーリング活動中に終了されることが多いため、Fluent Bit でこれらのログをリアルタイムにストリーミングし、ノードが終了した後でも CloudWatch Logs でこれらのログを利用できることは、EKS ワーカーノードの可観測性とヘルスモニタリングの観点から重要です。また、多くの場合、ワーカーノードにログインすることなくクラスターの問題をデバッグまたはトラブルシューティングし、これらのログをより体系的に分析することができます。</p>
</li>
<li>
<p>データプレーンログ：EKS はすでに<a href="https://docs.aws.amazon.com/ja_jp/eks/latest/userguide/control-plane-logs.html" target="_blank" rel="noopener noreferrer">コントロールプレーンログ</a>を提供しています。Container Insights の Fluent Bit 統合により、各ワーカーノードで実行され、実行中の Pod の維持を担当する EKS データプレーンコンポーネントによって生成されるログは、データプレーンログとして取得されます。これらのログも <code>&#x27;/aws/containerinsights/Cluster_Name/dataplane&#x27;</code> 配下の専用の CloudWatch ロググループにストリーミングされます。kube-proxy、aws-node、Docker ランタイムログがこのロググループに保存されます。コントロールプレーンログに加えて、データプレーンログを CloudWatch Logs に保存することで、EKS クラスターの完全な全体像を提供するのに役立ちます。</p>
</li>
</ul>
<p>さらに、Fluent Bit の設定、Fluent Bit のモニタリング、ログ分析などのトピックについては、<a href="https://aws.amazon.com/blogs/containers/fluent-bit-integration-in-cloudwatch-container-insights-for-eks/" target="_blank" rel="noopener noreferrer">Amazon EKS における Fluent Bit の統合</a> で詳しく学んでください。</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="amazon-eks-における-container-insights-のコスト削減">Amazon EKS における Container Insights のコスト削減<a href="#amazon-eks-における-container-insights-のコスト削減" class="hash-link" aria-label="Amazon EKS における Container Insights のコスト削減 への直接リンク" title="Amazon EKS における Container Insights のコスト削減 への直接リンク">​</a></h3>
<p>デフォルトの設定では、Container Insights レシーバーは <a href="https://github.com/open-telemetry/opentelemetry-collector-contrib/tree/main/receiver/awscontainerinsightreceiver#available-metrics-and-resource-attributes" target="_blank" rel="noopener noreferrer">レシーバーのドキュメント</a> で定義されている完全なメトリクスセットを収集します。
収集されるメトリクスとディメンションの数は多く、大規模なクラスターでは、メトリクスの取り込みと保存のコストが大幅に増加します。
ここでは、価値のあるメトリクスのみを送信してコストを削減するために、ADOT Collector を設定する 2 つの異なるアプローチを紹介します。</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="プロセッサーの使用">プロセッサーの使用<a href="#プロセッサーの使用" class="hash-link" aria-label="プロセッサーの使用 への直接リンク" title="プロセッサーの使用 への直接リンク">​</a></h4>
<p>このアプローチでは、上記で説明した OpenTelemetry プロセッサーを導入して、メトリクスや属性をフィルタリングし、<a href="https://docs.aws.amazon.com/ja_jp/AmazonCloudWatch/latest/monitoring/CloudWatch_Embedded_Metric_Format.html" target="_blank" rel="noopener noreferrer">EMF ログ</a> のサイズを削減します。ここでは、<em>Filter</em> と <em>Resource</em> という 2 つのプロセッサーの基本的な使用方法を説明します。</p>
<p><a href="https://github.com/open-telemetry/opentelemetry-collector-contrib/blob/main/processor/filterprocessor/README.md" target="_blank" rel="noopener noreferrer">Filter プロセッサー</a> は、<code>otel-agent-conf</code> という名前の <code>ConfigMap</code> に含めることができます：</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">processors:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  # filter processors example</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  filter/include:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    # any names NOT matching filters are excluded from remainder of pipeline</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    metrics:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      include:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        match_type: regexp</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        metric_names:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          # re2 regexp patterns</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          - ^pod_.*</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  filter/exclude:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    # any names matching filters are excluded from remainder of pipeline</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    metrics:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      exclude:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        match_type: regexp</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        metric_names:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          - ^pod_network.*</span><br></span></code></pre></div></div>
<p><a href="https://github.com/open-telemetry/opentelemetry-collector-contrib/blob/main/processor/resourceprocessor/README.md" target="_blank" rel="noopener noreferrer">Resource プロセッサー</a> は AWS OpenTelemetry Distro に組み込まれており、不要なメトリクス属性を削除するために使用できます。たとえば、EMF ログから <code>Kubernetes</code> と <code>Sources</code> フィールドを削除したい場合は、パイプラインに Resource プロセッサーを追加できます：</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">  # resource processors example</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  resource:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    attributes:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    - key: Sources</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      action: delete</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    - key: kubernetes</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      action: delete</span><br></span></code></pre></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="メトリクスとディメンションのカスタマイズ">メトリクスとディメンシ ョンのカスタマイズ<a href="#メトリクスとディメンションのカスタマイズ" class="hash-link" aria-label="メトリクスとディメンションのカスタマイズ への直接リンク" title="メトリクスとディメンションのカスタマイズ への直接リンク">​</a></h4>
<p>このアプローチでは、CloudWatch EMF エクスポーターを設定して、CloudWatch Logs に送信したいメトリクスのセットのみを生成します。CloudWatch EMF エクスポーター設定の <a href="https://github.com/open-telemetry/opentelemetry-collector-contrib/blob/5ccdbe08c6a2a43b7c6c7f9c0031a4b0348394a9/exporter/awsemfexporter/README.md#metric_declaration" target="_blank" rel="noopener noreferrer">metric_declaration</a> セクションを使用して、エクスポートしたいメトリクスとディメンションのセットを定義できます。たとえば、デフォルト設定から Pod メトリクスのみを保持できます。この <code>metric_declaration</code> セクションは以下のようになります。また、他のディメンションが不要な場合は、ディメンションセットを <code>[PodName, Namespace, ClusterName]</code> のみに限定してメトリクス数を削減できます：</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">  awsemf:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    namespace: ContainerInsights</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    log_group_name: &#x27;/aws/containerinsights/{ClusterName}/performance&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    log_stream_name: &#x27;{NodeName}&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    resource_to_telemetry_conversion:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      enabled: true</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    dimension_rollup_option: NoDimensionRollup</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    parse_json_encoded_attr_values: [Sources, kubernetes]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    # Customized metric declaration section</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    metric_declarations:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      # pod metrics</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      - dimensions: [[PodName, Namespace, ClusterName]]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        metric_name_selectors:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          - pod_cpu_utilization</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          - pod_memory_utilization</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          - pod_cpu_utilization_over_pod_limit</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          - pod_memory_utilization_over_pod_limit</span><br></span></code></pre></div></div>
<p>この設定により、デフォルト設定の複数のディメンションで 55 の異なるメトリクスを生成する代わりに、単一のディメンション <code>[PodName, Namespace, ClusterName]</code> で以下の 4 つのメトリクスのみを生成してストリーミングします：</p>
<ul>
<li>pod_cpu_utilization</li>
<li>pod_memory_utilization</li>
<li>pod_cpu_utilization_over_pod_limit</li>
<li>pod_memory_utilization_over_pod_limit</li>
</ul>
<p>この設定により、デフォルトで設定されているすべてのメトリクスではなく、関心のあるメトリクスのみを送信できます。その結果、Container Insights のメトリクス取り込みコストを大幅に削減できます。この柔軟性により、Container Insights のお客様はエクスポートされるメトリクスを高度に制御できます。<code>awsemf</code> エクスポーター設定を変更してメトリクスをカスタマイズすることも非常に柔軟で、送信したいメトリクスとそのディメンションの両方をカスタマイズできます。これは CloudWatch に送信されるログにのみ適用されることに注意してください。</p>
<p>上記で説明した 2 つのアプローチは、互いに排他的ではありません。実際、両方を組み合わせることで、監視システムに取り込むメトリクスのカスタマイズに高度な柔軟性を持たせることができます。以下のグラフに示すように、このアプローチを使用してメトリクスの保存と処理に関連するコストを削減します。</p>
<p><img decoding="async" loading="lazy" alt="CW-COST-EXPLORER" src="/observability-best-practices/ja/assets/images/cw-cost-explorer-36744006c7f0596712be861fc21076e2.jpg" width="1441" height="579" class="img_ev3q"></p>
<p><em>図：AWS Cost Explorer</em></p>
<p>上記の AWS Cost Explorer グラフでは、小規模な EKS クラスター（ワーカーノード 20 個、Pod 220 個）で ADOT Collector の異なる設定を使用した場合の CloudWatch の日次コストを確認できます。<em>8 月 15 日</em> は、デフォルト設定の ADOT Collector を使用した CloudWatch の請求額を示しています。<em>8 月 16 日</em> には、<a href="https://aws.amazon.com/jp/blogs/news/cost-savings-by-customizing-metrics-sent-by-container-insights-in-amazon-eks/" target="_blank" rel="noopener noreferrer">EMF エクスポーターのカスタマイズ</a> アプローチを使用し、約 30% のコスト削減が確認できます。<em>8 月 17 日</em> には、<a href="https://aws.amazon.com/jp/blogs/news/cost-savings-by-customizing-metrics-sent-by-container-insights-in-amazon-eks/" target="_blank" rel="noopener noreferrer">Processors</a> アプローチを使用し、約 45% のコスト削減を達成しています。</p>
<p>Container Insights が送信するメトリクスをカスタマイズすることで、監視対象クラスターの可視性を犠牲にしてモニタリングコストを削減できますが、トレードオフを考慮する必要があります。また、ダッシュボードで使用されるメトリクスとディメンションを送信しないように選択できるため、カスタマイズされたメトリクスは AWS コンソール内の Container Insights が提供する組み込みダッシュボードに影響を与える可能性があります。詳細については、<a href="https://aws.amazon.com/jp/blogs/news/cost-savings-by-customizing-metrics-sent-by-container-insights-in-amazon-eks/" target="_blank" rel="noopener noreferrer">Amazon EKS の Container Insights が送信するメトリクスをカスタマイズすることによるコスト削減</a> をご確認ください。</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="eks-blueprints-を使用した-container-insights-のセットアップ">EKS Blueprints を使用した Container Insights のセットアップ<a href="#eks-blueprints-を使用した-container-insights-のセットアップ" class="hash-link" aria-label="EKS Blueprints を使用した Container Insights のセットアップ への直接リンク" title="EKS Blueprints を使用した Container Insights のセットアップ への直接リンク">​</a></h3>
<p><a href="https://aws.amazon.com/jp/blogs/news/bootstrapping-clusters-with-eks-blueprints/" target="_blank" rel="noopener noreferrer">EKS Blueprints</a> は、アカウントやリージョン間で一貫性のある、すぐに使える EKS クラスターを設定およびデプロイするのに役立つ Infrastructure as Code (IaC) モジュールのコレクションです。EKS Blueprints を使用すると、<a href="https://docs.aws.amazon.com/ja_jp/eks/latest/userguide/eks-add-ons.html" target="_blank" rel="noopener noreferrer">Amazon EKS アドオン</a> や、Prometheus、Karpenter、Nginx、Traefik、AWS Load Balancer Controller、Container Insights、Fluent Bit、Keda、Argo CD などの広く使用されているオープンソースのアドオンを使用して、EKS クラスターを簡単にブートストラップできます。EKS Blueprints は、インフラストラクチャのデプロイを自動化するのに役立つ 2 つの一般的な IaC フレームワーク、<a href="https://github.com/aws-ia/terraform-aws-eks-blueprints" target="_blank" rel="noopener noreferrer">HashiCorp Terraform</a> と <a href="https://github.com/aws-quickstart/cdk-eks-blueprints" target="_blank" rel="noopener noreferrer">AWS Cloud Development Kit (AWS CDK)</a> で実装されています。</p>
<p>EKS Blueprints を使用した Amazon EKS クラスターの作成プロセスの一部として、Container Insights を Day One の運用ツールとしてセットアップし、コンテナ化されたアプリケーションやマイクロサービスからメトリクスとログを収集、集約、要約して Amazon CloudWatch コンソールに送信できます。</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="まとめ">まとめ<a href="#まとめ" class="hash-link" aria-label="まとめ への直接リンク" title="まとめ への直接リンク">​</a></h3>
<p>オブザーバビリティのベストプラクティスガイドのこのセクションでは、CloudWatch Container Insights について詳しく説明しました。
これには、Amazon CloudWatch Container Insights の紹介と、Amazon EKS 上のコンテナ化されたワークロードを監視する方法が含まれています。
AWS Distro for Open Telemetry と Amazon CloudWatch Container Insights を使用して、Container Insights メトリクスの収集を有効にし、Amazon CloudWatch コンソールでコンテナ化されたワークロードのメトリクスを可視化する方法について詳しく説明しました。
次に、Amazon EKS 向けの CloudWatch Container Insights における Fluent Bit 統合について詳しく説明し、Fluent Bit 内に専用の入力ストリームを作成し、アプリケーション、ホスト、データプレーンのログ用に CloudWatch Logs 内に独立したロググループを作成する方法を説明しました。
さらに、CloudWatch Container Insights でコスト削減を実現するための、プロセッサーやメトリクスディメンションなど、2 つの異なるアプローチについて説明しました。
最後に、Amazon EKS クラスターの作成プロセス中に Container Insights をセットアップするための手段として EKS Blueprints を使用する方法について簡単に説明しました。
<a href="https://catalog.workshops.aws/observability/en-US" target="_blank" rel="noopener noreferrer">One Observability Workshop</a> 内の <a href="https://catalog.workshops.aws/observability/en-US/aws-native/insights/containerinsights" target="_blank" rel="noopener noreferrer">CloudWatch Container Insights モジュール</a> で実践的な経験を積むことができます。</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col"><a href="https://github.com/aws-observability/observability-best-practices/blob/main/docusaurus/docs/guides/containers/aws-native/eks/amazon-cloudwatch-container-insights.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>このページを編集</a></div><div class="col lastUpdated_JAkA"></div></div></footer></article><nav class="docusaurus-mt-lg pagination-nav" aria-label="ドキュメントページ"><a class="pagination-nav__link pagination-nav__link--prev" href="/observability-best-practices/ja/guides/containers/oss/ecs/best-practices-metrics-collection-2"><div class="pagination-nav__sublabel">前へ</div><div class="pagination-nav__label">AWS Distro for OpenTelemetry を使用した ECS クラスターでのサービスメトリクスの収集</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/observability-best-practices/ja/guides/containers/aws-native/eks/log-aggregation"><div class="pagination-nav__sublabel">次へ</div><div class="pagination-nav__label">ログ集約</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#はじ  めに" class="table-of-contents__link toc-highlight">はじめに</a></li><li><a href="#aws-distro-for-open-telemetry-を使用した-amazon-cloudwatch-container-insights" class="table-of-contents__link toc-highlight">AWS Distro for Open Telemetry を使用した Amazon CloudWatch Container Insights</a></li><li><a href="#amazon-eks-向け-cloudwatch-container-insights-における-fluent-bit-の統合" class="table-of-contents__link toc-highlight">Amazon EKS 向け CloudWatch Container Insights における Fluent Bit の統合</a></li><li><a href="#amazon-eks-における-container-insights-のコスト削減" class="table-of-contents__link toc-highlight">Amazon EKS における Container Insights のコスト削減</a></li><li><a href="#eks-blueprints-を使用した-container-insights-のセットアップ" class="table-of-contents__link toc-highlight">EKS Blueprints を使用した Container Insights のセットアップ</a></li><li><a href="#まとめ" class="table-of-contents__link toc-highlight">まとめ</a></li></ul></div></div></div></div></main></div></div></div><footer class="theme-layout-footer footer footer--dark"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="footer__copyright">Built with ❤️ at AWS. <br> © 2025.  Amazon.com, Inc. or its affiliates. All Rights Reserved.</div></div></div></footer></div>
</body>
</html>